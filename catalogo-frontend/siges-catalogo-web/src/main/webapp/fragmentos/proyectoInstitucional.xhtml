<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:o="http://omnifaces.org/ui"
                xmlns:p="http://primefaces.org/ui">   

    <h:form id="form">    
        <f:passThroughAttribute name="autocomplete" value="off"/>       

        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#{ConstantesPaginas.ADMINISTRACION}.xhtml">Administraci√≥n</a></li>
                <li class="breadcrumb-item"><a href="#{ConstantesPaginas.GESTION_PROYECTOS_INSTITUCIONALES}" >#{msg.gestionProyectosInstitucionales}</a></li>
                <li class="breadcrumb-item active" aria-current="page">#{msg.proyectoInstitucional}</li>
            </ol>
        </nav>

        <p:outputPanel styleClass="panel-titulo-pagina">
            <h2 class="page-header"><h:outputText value="#{msg.proyectoInstitucional}"/></h2>

            <p:outputPanel styleClass="float-right">
                <p:commandButton title="#{msg.ayuda}" icon="glyphicon glyphicon-question-sign" 
                                 id="btnAyuda" styleClass="btn btn-icono btn-ayuda"  oncomplete="PF('sidebar').show()" />

                <ui:include src="componentes/ayudaComponente.xhtml">
                    <ui:param name="ayuda" id="uso" value="#{sessionBean.getAyuda(ConstantesAyuda.PROYECTO_INSTITUCIONAL)}" /> 
                </ui:include>

            </p:outputPanel>

            <div class="lineaHeader"><div class="verde"></div><div class="amarillo"></div><div class="rojo"></div><div class="celeste"></div></div>
        </p:outputPanel>


        <p:outputPanel id="formularioDatosGenerales">
            <fieldset>
                <legend>
                    <h:outputText rendered="#{proyectoInstitucionalBean.entidadEnEdicion.pinPk == null}" value="#{msg.registroProyectoInstitucional}"/>
                    <h:outputText rendered="#{proyectoInstitucionalBean.entidadEnEdicion.pinPk != null}" value="#{msg.edicionProyectoIntitucional}"/>
                </legend>


                <fieldset>
                    <legend><h:outputText value="#{msg.datosGenerales}"/></legend>


                    <p:outputPanel styleClass="col-md-10"> 

                        <p:outputPanel styleClass="form-group row" id="fila_input_codigo">                        
                            <h:outputLabel value="#{msg.codigo}" for="input_codigo" 
                                           styleClass="col-sm-3 col-form-label obligatorio"/>
                            <p:outputPanel styleClass="col-sm-9">                            
                                <h:inputText autocomplete="off" id="input_codigo" 
                                             value="#{proyectoInstitucionalBean.entidadEnEdicion.pinCodigo}" 
                                             styleClass="form-control texto-corto" maxlength="4"/>
                                <h:message for="input_codigo" styleClass="msj-danger"/>
                            </p:outputPanel>                    
                        </p:outputPanel>

                        <p:outputPanel styleClass="form-group row" id="fila_input_nombre">                        
                            <h:outputLabel value="#{msg.nombre}" for="input_nombre" 
                                           styleClass="col-sm-3 col-form-label obligatorio"/>                        
                            <p:outputPanel styleClass="col-sm-9">                            
                                <h:inputText autocomplete="off" id="input_nombre" 
                                             value="#{proyectoInstitucionalBean.entidadEnEdicion.pinNombre}" 
                                             styleClass="form-control texto-medio" maxlength="100"/>
                                <h:message for="input_nombre" styleClass="msj-danger"/>
                            </p:outputPanel>                    
                        </p:outputPanel>

                        <p:outputPanel styleClass="form-group row" id="fila_input_descripcion">                        
                            <h:outputLabel value="#{msg.descripcion}" for="input_descripcion" 
                                           styleClass="col-sm-3 col-form-label"/>                        
                            <p:outputPanel styleClass="col-sm-9">
                                <p:inputTextarea id="input_descripcion" styleClass="form-control texto-medio" 
                                                 value="#{proyectoInstitucionalBean.entidadEnEdicion.pinDescripcion}"
                                                 counter="display" maxlength="255" counterTemplate="{0} caracteres restantes." 
                                                 autoResize="false" />
                                <h:outputText id="display" />
                                <h:message for="input_descripcion" styleClass="msj-danger"/>
                            </p:outputPanel>                    
                        </p:outputPanel>       

                        <p:outputPanel styleClass="form-group row" id="fila_input_habilitado">
                            <h:outputLabel value="#{msg.habilitado}" for="input_habilitado"
                                           styleClass="col-sm-3 col-form-label"/>
                            <p:outputPanel styleClass="col-sm-9">
                                <p:selectOneRadio layout="responsive" columns="3" id="input_habilitado" 
                                                  value="#{proyectoInstitucionalBean.entidadEnEdicion.pinHabilitado}">
                                    <f:selectItems value="#{applicationBean.habilitadoValues}" />
                                </p:selectOneRadio>
                            </p:outputPanel>
                        </p:outputPanel>      

                        <p:outputPanel styleClass="form-group row" id="fila_input_programa_institucional">
                            <h:outputLabel value="#{msg.programasIntitucionales}" for="input_programa_institucional"
                                           styleClass="col-sm-3 col-form-label"/>
                            <p:outputPanel styleClass="col-sm-9">
                                <h:selectOneMenu id="input_programa_institucional" 
                                                 value="#{proyectoInstitucionalBean.comboProgramaInstitucional.selected}" 
                                                 styleClass="form-control dropdown texto-medio">
                                    <f:selectItems value="#{proyectoInstitucionalBean.comboProgramaInstitucional.items}"/>
                                    <p:ajax event="change" process="@this" listener="#{proyectoInstitucionalBean.seleccionarPrograma()}"/>
                                </h:selectOneMenu>
                            </p:outputPanel>
                        </p:outputPanel>    

                        <p:outputPanel styleClass="form-group row" id="fila_input_anio">
                            <h:outputLabel value="#{msg.anio}" for="input_anio"
                                           styleClass="col-sm-3 col-form-label obligatorio"/>
                            <p:outputPanel styleClass="col-sm-9">              
                                <p:inputNumber autocomplete="off" id="input_anio" 
                                               value="#{proyectoInstitucionalBean.entidadEnEdicion.pinAnio}" 
                                               styleClass="form-control calendario" 
                                               maxValue="9999" 
                                               decimalPlaces="0" thousandSeparator=""/>
                            </p:outputPanel>
                        </p:outputPanel>

                        <p:outputPanel styleClass="form-group row" id="fila_input_fecha_inicio">
                            <h:outputLabel value="#{msg.fechaInicio}" for="input_fecha_inicio"
                                           styleClass="col-sm-3 col-form-label obligatorio"/>
                            <p:outputPanel styleClass="col-sm-9">
                                    <p:calendar id="input_fecha_inicio" autocomplete="off" styleClass="fomr-control" 
                                                pattern="#{applicationBean.patternFecha}"  
                                                value="#{proyectoInstitucionalBean.entidadEnEdicion.pinFechaInicio}" 
                                                converter="#{localDateConverter}" mask="true"/>
                            </p:outputPanel>
                        </p:outputPanel>

                        <p:outputPanel styleClass="form-group row" id="fila_input_fecha_fin">
                            <h:outputLabel value="#{msg.fechaFin}" for="input_fecha_fin"
                                           styleClass="col-sm-3 col-form-label obligatorio"/>
                            <p:outputPanel styleClass="col-sm-9">
                                    <p:calendar id="input_fecha_fin" autocomplete="off" styleClass="fomr-control" 
                                                pattern="#{applicationBean.patternFecha}"  
                                                value="#{proyectoInstitucionalBean.entidadEnEdicion.pinFechaFin}" 
                                                converter="#{localDateConverter}" mask="true"/>
                            </p:outputPanel>
                        </p:outputPanel>
                        
                        <p:outputPanel styleClass="form-group row" id="fila_input_origen_transferencia">                        
                            <h:outputLabel value="#{msg.origenTransferencia}" for="input_origen_transferencia" 
                                           styleClass="col-sm-3 col-form-label"/>                        
                            <p:outputPanel styleClass="col-sm-9">
                                <p:inputText id="input_origen_transferencia" styleClass="form-control texto-medio" 
                                                 value="#{proyectoInstitucionalBean.entidadEnEdicion.pinOrigenTransferencia}"
                                                 maxlength="100" />
                            </p:outputPanel>                    
                        </p:outputPanel>  
                        <p:outputPanel styleClass="form-group row" id="fila_input_convenio">                        
                            <h:outputLabel value="#{msg.convenio}" for="input_convenio" 
                                           styleClass="col-sm-3 col-form-label"/>                        
                            <p:outputPanel styleClass="col-sm-9">
                                <p:inputText id="input_convenio" styleClass="form-control texto-medio" 
                                             value="#{proyectoInstitucionalBean.entidadEnEdicion.pinConvenio}"
                                                 maxlength="100" />
                            </p:outputPanel>                    
                        </p:outputPanel>
                        <p:outputPanel styleClass="form-group row" id="fila_input_monto">                        
                            <h:outputLabel value="#{msg.monto}" for="input_monto" 
                                           styleClass="col-sm-3 col-form-label"/>                        
                            <p:outputPanel styleClass="col-sm-9">
                                <p:inputNumber autocomplete="off" id="input_monto"
                                               value="#{proyectoInstitucionalBean.entidadEnEdicion.pinMonto}"
                                       styleClass="form-control texto-corto" 
                                       maxValue="9999999999"
                                       minValue="0"
                                       decimalPlaces="2" thousandSeparator=""/>
                            </p:outputPanel>                    
                        </p:outputPanel> 
                        <p:outputPanel styleClass="form-group row" id="fila_input_condiciones_entrega">                        
                            <h:outputLabel value="#{msg.condicionesEntrega}" for="input_condiciones_entrega" 
                                           styleClass="col-sm-3 col-form-label"/>                        
                            <p:outputPanel styleClass="col-sm-9">
                                <p:inputText id="input_condiciones_entrega" styleClass="form-control texto-medio" 
                                             value="#{proyectoInstitucionalBean.entidadEnEdicion.pinCondicionesEntrega}"
                                                 maxlength="100" />
                            </p:outputPanel>                    
                        </p:outputPanel> 


                    </p:outputPanel>
                </fieldset>

                <p:outputPanel styleClass="col-md-12 texto-right">
                    <p:commandButton id="btnGuardarAsociacion"  value="#{msg.guardar}" 
                                     action="#{proyectoInstitucionalBean.guardar()}"
                                     update="formularioDatosGenerales ProyectosTb" 
                                     styleClass="btn btn-primary" 
                                     icon="glyphicon glyphicon-floppy-disk" 
                                     rendered="#{sessionBean.operaciones.contains(ConstantesOperaciones.CREAR_PROYECTOS_INSTITUCIONALES)}">
                    </p:commandButton>
                     <p:blockUI block="formularioDatosGenerales" trigger="btnGuardarAsociacion" />
                </p:outputPanel>




                <fieldset>
                    <legend><h:outputText value="#{msg.asociaciones}"/></legend>
                    <p:outputPanel styleClass="form-group row" id="fila_input_proyectos" >
                        <p:outputPanel styleClass="col-sm-12" id="ProyectosTb">  
                            <p:outputPanel styleClass="form-action-buttons margen-sup">
                                <p:commandButton value="#{msg.agregar}" icon="glyphicon glyphicon-plus" 
                                                 action="#{proyectoInstitucionalBean.agregarAsociacion()}"  
                                                 rendered="#{sessionBean.operaciones.contains(ConstantesOperaciones.CREAR_ASOCIACIONES)}" 
                                                 update="form:proyectoDetalle" oncomplete="PF('proyectoDialog').show()"  
                                                 disabled="#{proyectoInstitucionalBean.entidadEnEdicion.pinPk==null}"
                                                 id="btnAgregarProyectoInstitucional" 
                                                 widgetVar="btnAddProyectoInstitucional" 
                                                 styleClass="btn btn-secondary" />
                            </p:outputPanel>                            

                            <p:outputPanel id="pnlProyectos">
                                <p:dataTable id="tablaProyectos" var="asociacion" 
                                             emptyMessage="#{msg.noHayResultados}"
                                             value="#{proyectoInstitucionalBean.entidadEnEdicion.pinAsociaciones}">

                                    <p:column headerText="#{msg.hnombre}">
                                        <h:outputText value="#{asociacion.asoNombre}" />
                                    </p:column>
                                    <p:column headerText="#{msg.hhabilitado}">
                                        <h:outputText value="#{asociacion.asoHabilitado}" converter="#{booleanConverter}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.tipoAsociacion}">
                                        <h:outputText value="#{asociacion.asoTipoAsociacion.tasNombre}" />
                                    </p:column>
                                    <p:column headerText="#{msg.hEjecutaFondosMined}">
                                        <h:outputText value="#{asociacion.asoEjecutaFondosMined}" converter="#{booleanConverter}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.hExtranjera}">
                                        <h:outputText value="#{asociacion.asoExtranjera}" converter="#{booleanConverter}"/>
                                    </p:column>
                                                                                                                  

                                    <p:column styleClass="columnaAcciones"  exportable="false" 
                                              rendered="#{sessionBean.operaciones.contains(ConstantesOperaciones.ELIMINAR_ASOCIACIONES)}">
                                        <p:commandButton oncomplete="PF('confirmDialog').show()" icon="glyphicon glyphicon-trash " 
                                                    styleClass="btn btn-icono rojo" title="#{msg.eliminar}" 
                                                    action="#{proyectoInstitucionalBean.editarAsociacion(asociacion)}"/>
                                    </p:column>                                         
                                </p:dataTable>   
                            </p:outputPanel>
                        </p:outputPanel>
                    </p:outputPanel>
                </fieldset>
                
                <fieldset>
                    <legend><h:outputText value="#{msg.hcomponentes}"/></legend>
                    <p:outputPanel styleClass="form-group row" id="fila_input_componentes" >
                        <p:outputPanel styleClass="col-sm-12" id="ComponentesTb">  
                            <p:outputPanel styleClass="form-action-buttons margen-sup">
                                <p:commandButton value="#{msg.agregar}" icon="glyphicon glyphicon-plus" 
                                                 action="#{proyectoInstitucionalBean.agregarComponente()}" 
                                                 update="form:componenteDetalle" oncomplete="PF('componenteDialog').show()"  
                                                 disabled="#{proyectoInstitucionalBean.entidadEnEdicion.pinPk==null}" 
                                                 rendered="#{sessionBean.operaciones.contains(ConstantesOperaciones.CREAR_COMPONENTES)}" 
                                                 id="btnAgregarComponente" 
                                                 widgetVar="btnAddComponente" 
                                                 styleClass="btn btn-secondary" />
                            </p:outputPanel>                            

                            <p:outputPanel id="pnlComponentes">
                                <p:dataTable id="tablaComponentes" var="elem" 
                                             emptyMessage="#{msg.noHayResultados}"
                                             value="#{proyectoInstitucionalBean.entidadEnEdicion.pinComponentes}">

                                    <p:column headerText="#{msg.hnombre}">
                                        <h:outputText value="#{elem.cpnNombre}" />
                                    </p:column>
                                    <p:column headerText="#{msg.hdescripcion}">
                                        <h:outputText value="#{elem.cpnDescripcion}" />
                                    </p:column>
                                    <p:column styleClass="columnaAcciones"  exportable="false" 
                                              rendered="#{sessionBean.operaciones.contains(ConstantesOperaciones.ELIMINAR_COMPONENTES)}">
                                        <p:commandButton oncomplete="PF('confirmDialogComponente').show()" icon="glyphicon glyphicon-trash " 
                                                    styleClass="btn btn-icono rojo" title="#{msg.eliminar}" 
                                                    action="#{proyectoInstitucionalBean.editarComponente(elem)}"/>
                                    </p:column>                                         
                                </p:dataTable>   
                            </p:outputPanel>
                        </p:outputPanel>
                    </p:outputPanel>
                </fieldset>
                
                <fieldset>
                    <legend><h:outputText value="#{msg.productosBeneficios}"/></legend>
                    <p:outputPanel styleClass="form-group row" id="fila_input_beneficios" >
                        <p:outputPanel styleClass="col-sm-12" id="BeneficiosTb">  
                            <p:outputPanel styleClass="form-action-buttons margen-sup">
                                <p:commandButton value="#{msg.agregar}" icon="glyphicon glyphicon-plus" 
                                                 action="#{proyectoInstitucionalBean.agregarBeneficio()}"  
                                                 rendered="#{sessionBean.operaciones.contains(ConstantesOperaciones.CREAR_BENEFICIOS)}" 
                                                 update="form:beneficioDetalle" oncomplete="PF('beneficioDialog').show()"  
                                                 disabled="#{proyectoInstitucionalBean.entidadEnEdicion.pinPk==null}"
                                                 id="btnAgregarBeneficio" 
                                                 widgetVar="btnAddBeneficio" 
                                                 styleClass="btn btn-secondary" />
                            </p:outputPanel>                            

                            <p:outputPanel id="pnlBeneficios">
                                <p:dataTable id="tablaBeneficios" var="elem" 
                                             emptyMessage="#{msg.noHayResultados}"
                                             value="#{proyectoInstitucionalBean.entidadEnEdicion.pinBeneficios}">

                                    <p:column headerText="#{msg.hnombre}">
                                        <h:outputText value="#{elem.bnfNombre}" />
                                    </p:column>
                                    <p:column headerText="#{msg.hdescripcion}">
                                        <h:outputText value="#{elem.bnfDescripcion}" />
                                    </p:column>
                                    <p:column headerText="#{msg.hobjetivos}">
                                        <h:outputText value="#{elem.bnfObjetivos}" />
                                    </p:column>
                                    <p:column headerText="#{msg.htipoBeneficio}">
                                        <h:outputText value="#{elem.bnfTipoBeneficio.text}" />
                                    </p:column>
                                    <p:column headerText="#{msg.hcantidadAnual}">
                                        <h:outputText value="#{elem.bnfCantidadAnual}" />
                                    </p:column>
                                                                                                                  

                                    <p:column styleClass="columnaAcciones"  exportable="false" 
                                              rendered="#{sessionBean.operaciones.contains(ConstantesOperaciones.ELIMINAR_BENEFICIOS)}">
                                        <p:commandButton oncomplete="PF('confirmDialogBeneficio').show()" icon="glyphicon glyphicon-trash " 
                                                    styleClass="btn btn-icono rojo" title="#{msg.eliminar}" 
                                                    action="#{proyectoInstitucionalBean.editarBeneficio(elem)}"/>
                                    </p:column>                                         
                                </p:dataTable>   
                            </p:outputPanel>
                        </p:outputPanel>
                    </p:outputPanel>
                </fieldset>

            </fieldset>
        </p:outputPanel>

        <p:confirmDialog id="confirmDialog"
                         message="#{msg.textoConfirmacionEliminacion}"
                         header="#{msg.confirmacionEliminacion}" severity="alert" widgetVar="confirmDialog">
            <p:outputPanel styleClass="float-right" >
                <p:commandButton id="confirmDelete" value="#{msg.hconfirmar}" update="pnlProyectos form:ProyectosTb"
                                 oncomplete="PF('confirmDialog').hide()"
                                 styleClass="btn btn-primary"
                                 action="#{proyectoInstitucionalBean.eliminarAsociacion()}"  />
                <p:blockUI block="@form" trigger="confirmDelete"/>
                <p:commandLink id="cancelarDelete" value="#{msg.cancelar}"
                               onclick="PF('confirmDialog').hide()" styleClass="btn btn-link" />
            </p:outputPanel>
        </p:confirmDialog>

        <p:confirmDialog id="confirmDialogComponente"
                         message="#{msg.textoConfirmacionEliminacion}"
                         header="#{msg.confirmacionEliminacion}" severity="alert" widgetVar="confirmDialogComponente">
            <p:outputPanel styleClass="float-right" >
                <p:commandButton id="confirmDeleteComponente" value="#{msg.hconfirmar}" update="pnlComponentes form:ComponentesTb"
                                 oncomplete="PF('confirmDialogComponente').hide()"
                                 styleClass="btn btn-primary"
                                 action="#{proyectoInstitucionalBean.eliminarComponente()}"  />
                <p:blockUI block="@form" trigger="confirmDeleteComponente"/>
                <p:commandLink id="cancelarDeleteComponente" value="#{msg.cancelar}"
                               onclick="PF('confirmDialogComponente').hide()" styleClass="btn btn-link" />
            </p:outputPanel>
        </p:confirmDialog>

        <p:confirmDialog id="confirmDialogBeneficio"
                         message="#{msg.textoConfirmacionEliminacion}"
                         header="#{msg.confirmacionEliminacion}" severity="alert" widgetVar="confirmDialogBeneficio">
            <p:outputPanel styleClass="float-right" >
                <p:commandButton id="confirmDeleteBeneficio" value="#{msg.hconfirmar}" update="pnlBeneficios form:BeneficiosTb"
                                 oncomplete="PF('confirmDialogBeneficio').hide()"
                                 styleClass="btn btn-primary"
                                 action="#{proyectoInstitucionalBean.eliminarBeneficio()}"  />
                <p:blockUI block="@form" trigger="confirmDeleteBeneficio"/>
                <p:commandLink id="cancelarDeleteBeneficio" value="#{msg.cancelar}"
                               onclick="PF('confirmDialogBeneficio').hide()" styleClass="btn btn-link" />
            </p:outputPanel>
        </p:confirmDialog>



        <p:dialog id="proyectoDialog" header="#{msg.nuevoAsociacion}" 
                  widgetVar="proyectoDialog" modal="true" showEffect="fade" 
                  hideEffect="fade" resizable="false" closable="true" >
            <p:outputPanel id="proyectoDetalle"> 
                <p:messages id="popupmsg" showDetail="true" globalOnly="false" for="popupmsg" closable="true"/>   
                <p:outputPanel styleClass="form-group row" id="fila_input_tipo_asociacion">
                    <h:outputLabel value="#{msg.hhtipoAsociacion}" for="input_tipo_asociacion" styleClass="col-sm-4 col-md-2 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-8 col-md-10">
                        <h:selectOneMenu id="input_tipo_asociacion" 
                                         value="#{proyectoInstitucionalBean.comboTipoAsociacion.selected}" 
                                         styleClass="form-control dropdown texto-medio">
                            <f:selectItems value="#{proyectoInstitucionalBean.comboTipoAsociacion.items}"/>
                            <p:ajax listener="#{proyectoInstitucionalBean.cargarAsociaciones()}" update="fila_input_asociacion" event="change" process="@this"/>
                        </h:selectOneMenu>
                    </p:outputPanel>                    
                </p:outputPanel>

                <p:outputPanel styleClass="form-group row" id="fila_input_asociacion">
                    <h:outputLabel value="#{msg.hhasociacion}" for="input_asociacion" styleClass="col-sm-4 col-md-2 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-8 col-md-10">
                        <h:selectOneMenu id="input_asociacion" 
                                         value="#{proyectoInstitucionalBean.comboAsociacion.selected}" 
                                         styleClass="form-control dropdown texto-medio">
                            <f:selectItems value="#{proyectoInstitucionalBean.comboAsociacion.items}"/>
                        </h:selectOneMenu>
                    </p:outputPanel>                    
                </p:outputPanel>

                <p:outputPanel styleClass="control-group" >
                    <p:outputPanel styleClass="float-right">
                        <p:commandButton id="btnGuardarProyecto"  value="#{msg.guardar}" 
                                         action="#{proyectoInstitucionalBean.guardarAsociacion()}"
                                         update="proyectoDetalle pnlProyectos form:ProyectosTb" 
                                         styleClass="btn btn-primary" 
                                         icon="glyphicon glyphicon-floppy-disk" />
                        <p:commandLink value="#{msg.cancelar}" oncomplete="PF('proyectoDialog').hide();"  
                                       styleClass="btn btn-link"/>                        
                    </p:outputPanel>                    
                </p:outputPanel>                     
                <p:blockUI block="proyectoDetalle" trigger="btnGuardarProyecto" />     
                <p:defaultCommand target="btnGuardarProyecto" scope="proyectoDetalle"/>                           
            </p:outputPanel>
        </p:dialog>
        
        
        <p:dialog id="componenteDialog" header="#{msg.nuevoComponente}" 
                  widgetVar="componenteDialog" modal="true" showEffect="fade" 
                  hideEffect="fade" resizable="false" closable="true" >
            <p:outputPanel id="componenteDetalle"> 
                <p:messages id="popupmsgComponente" showDetail="true" globalOnly="false" for="popupmsgComponente" closable="true"/>   
                <p:outputPanel styleClass="form-group row" id="fila_componente_input_nombre">
                    <h:outputLabel value="#{msg.nombre}" for="componente_input_nombre" 
                                   styleClass="col-sm-4 col-md-2 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-8 col-md-10">
                        <h:inputText autocomplete="off" styleClass="form-control" id="componente_input_nombre" 
                                     value="#{proyectoInstitucionalBean.componenteEnEdicion.cpnNombre}" />
                    </p:outputPanel>                    
                </p:outputPanel>  
                <p:outputPanel styleClass="form-group row" id="fila_componente_input_descripcion">
                    <h:outputLabel value="#{msg.descripcion}" for="componente_input_descripcion" 
                                   styleClass="col-sm-4 col-md-2 col-form-label"/>
                    <p:outputPanel styleClass="col-sm-8 col-md-10">
                        <p:inputTextarea id="componente_input_descripcion" styleClass="form-control" 
                                         value="#{proyectoInstitucionalBean.componenteEnEdicion.cpnDescripcion}"
                                         counter="displayComponente" maxlength="255" counterTemplate="{0} caracteres restantes." 
                                         autoResize="false" />
                        <h:outputText id="displayComponente" />
                        <h:message for="componente_input_descripcion" styleClass="msj-danger"/>
                    </p:outputPanel>                    
                </p:outputPanel>

                <p:outputPanel styleClass="control-group" >
                    <p:outputPanel styleClass="float-right">
                        <p:commandButton id="btnGuardarComponente"  value="#{msg.guardar}" 
                                         action="#{proyectoInstitucionalBean.guardarComponente()}"
                                         update="componenteDetalle pnlComponentes form:ComponentesTb" 
                                         styleClass="btn btn-primary" 
                                         icon="glyphicon glyphicon-floppy-disk" />
                        <p:commandLink value="#{msg.cancelar}" oncomplete="PF('componenteDialog').hide();"  
                                       styleClass="btn btn-link"/>                        
                    </p:outputPanel>                    
                </p:outputPanel>                     
                <p:blockUI block="componenteDetalle" trigger="btnGuardarComponente" />     
                <p:defaultCommand target="btnGuardarComponente" scope="componenteDetalle"/>                           
            </p:outputPanel>
        </p:dialog>


        <p:dialog id="beneficioDialog" header="#{msg.nuevoBeneficio}" 
                  widgetVar="beneficioDialog" modal="true" showEffect="fade" 
                  hideEffect="fade" resizable="false" closable="true" >
            <p:outputPanel id="beneficioDetalle"> 
                <p:messages id="popupmsgBeneficio" showDetail="true" globalOnly="false" for="popupmsgBeneficio" closable="true"/>   
                <p:outputPanel styleClass="form-group row" id="fila_beneficio_input_nombre">
                    <h:outputLabel value="#{msg.nombre}" for="beneficio_input_nombre" 
                                   styleClass="col-sm-4 col-md-4 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-8 col-md-8">
                        <h:inputText autocomplete="off" styleClass="form-control" id="beneficio_input_nombre" 
                                     value="#{proyectoInstitucionalBean.beneficioEnEdicion.bnfNombre}" />
                    </p:outputPanel>                    
                </p:outputPanel>  
                <p:outputPanel styleClass="form-group row" id="fila_beneficio_input_descripcion">
                    <h:outputLabel value="#{msg.descripcion}" for="beneficio_input_descripcion" 
                                   styleClass="col-sm-4 col-md-4 col-form-label"/>
                    <p:outputPanel styleClass="col-sm-8 col-md-8">
                        <p:inputTextarea id="beneficio_input_descripcion" styleClass="form-control" 
                                         value="#{proyectoInstitucionalBean.beneficioEnEdicion.bnfDescripcion}"
                                         counter="displayBeneficio" maxlength="255" counterTemplate="{0} caracteres restantes." 
                                         autoResize="false" />
                        <h:outputText id="displayBeneficio" />
                        <h:message for="beneficio_input_descripcion" styleClass="msj-danger"/>
                    </p:outputPanel>                    
                </p:outputPanel>
                <p:outputPanel styleClass="form-group row" id="fila_beneficio_input_objetivo">
                    <h:outputLabel value="#{msg.objetivos}" for="beneficio_input_objetivo" 
                                   styleClass="col-sm-4 col-md-4 col-form-label"/>
                    <p:outputPanel styleClass="col-sm-8 col-md-8">
                        <p:inputTextarea id="beneficio_input_objetivo" styleClass="form-control" 
                                         value="#{proyectoInstitucionalBean.beneficioEnEdicion.bnfObjetivos}"
                                         counter="displayObjetivo" maxlength="500" counterTemplate="{0} caracteres restantes." 
                                         autoResize="false" />
                        <h:outputText id="displayObjetivo" />
                        <h:message for="beneficio_input_objetivo" styleClass="msj-danger"/>
                    </p:outputPanel>                    
                </p:outputPanel>
                <p:outputPanel styleClass="form-group row" id="fila_beneficio_input_tipo_beneficio">
                    <h:outputLabel value="#{msg.tipoBeneficio}" for="beneficio_input_tipo_beneficio" 
                                   styleClass="col-sm-4 col-md-4 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-8 col-md-8">
                        <h:selectOneMenu id="beneficio_input_tipo_beneficio" 
                                         value="#{proyectoInstitucionalBean.comboTipoBeneficio.selected}" 
                                        styleClass="form-control dropdown">
                            <f:selectItems value="#{proyectoInstitucionalBean.comboTipoBeneficio.items}"/>
                        </h:selectOneMenu>
                        <h:message for="beneficio_input_tipo_beneficio" styleClass="msj-danger"/>
                    </p:outputPanel>
                </p:outputPanel>
                <p:outputPanel styleClass="form-group row" id="fila_beneficio_input_cantidad_otorgamiento">
                    <h:outputLabel value="#{msg.cantidadOtorgamientos}" for="beneficio_input_cantidad_otorgamiento" 
                                   styleClass="col-sm-4 col-md-4 col-form-label"/>
                    <p:outputPanel styleClass="col-sm-8 col-md-8">
                        <p:inputNumber id="beneficio_input_cantidad_otorgamiento" autocomplete="false"  
                                       styleClass="form-control"
                                       value="#{proyectoInstitucionalBean.beneficioEnEdicion.bnfCantidadAnual}" minValue="0" maxValue="100"/>  
                        <h:message for="beneficio_input_cantidad_otorgamiento" styleClass="msj-danger"/>
                    </p:outputPanel>
                </p:outputPanel>
                

                <p:outputPanel styleClass="control-group" >
                    <p:outputPanel styleClass="float-right">
                        <p:commandButton id="btnGuardarBeneficio"  value="#{msg.guardar}" 
                                         action="#{proyectoInstitucionalBean.guardarBeneficio()}"
                                         update="beneficioDetalle pnlBeneficios form:BeneficiosTb" 
                                         styleClass="btn btn-primary" 
                                         icon="glyphicon glyphicon-floppy-disk" />
                        <p:commandLink value="#{msg.cancelar}" oncomplete="PF('beneficioDialog').hide();"  
                                       styleClass="btn btn-link"/>                        
                    </p:outputPanel>                    
                </p:outputPanel>                     
                <p:blockUI block="beneficioDetalle" trigger="btnGuardarBeneficio" />     
                <p:defaultCommand target="btnGuardarBeneficio" scope="beneficioDetalle"/>                           
            </p:outputPanel>
        </p:dialog>

        <h:panelGroup styleClass="volverLink" layout="block">
            <p:commandLink value="#{msg.volver}" onclick="history.go(-1)" styleClass="btn btn-link"/>
        </h:panelGroup> 

    </h:form>
</ui:composition>
