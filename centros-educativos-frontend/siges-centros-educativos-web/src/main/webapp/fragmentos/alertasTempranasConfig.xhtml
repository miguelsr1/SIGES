<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"               
                xmlns:o="http://omnifaces.org/ui">

    <h:form id="form">
        <o:importConstants type="sv.gob.mined.siges.web.enumerados.EnumRiesgoAlerta"/>
        <p:outputPanel styleClass="panel-titulo-pagina">
            <h2 class="page-header"><h:outputText value="#{msg.halertasTempranas}"/></h2>
            <div class="lineaHeader"><div class="verde"></div><div class="amarillo"></div><div class="rojo"></div><div class="celeste"></div></div>
        </p:outputPanel>

        <p:outputPanel styleClass="row">
            <div class="col-sm-6" >
                <p:panel class="codiguera" header="Asistencia"> 
                    <p:dataTable                                           
                        var="elem"                          
                        value="#{alertasTempranasConfigBean.config.cnfAlertaAsistencia}"                          
                        emptyMessage="#{msg.noHayResultados}"		
                        paginator="false"
                        editable="true" 
                        editMode="cell"
                        reflow="true" >

                        <p:column headerText="Categoría" style="width:40%">
                            <h:outputText value="#{elem.cnfNombre}" />
                        </p:column>
                        <p:column headerText="#{msg.hriesgoMuyAlto}" style="width:20%" styleClass="align-right">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{elem.cnfRiesgoMuyAlto}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputNumber value="#{elem.cnfRiesgoMuyAlto}" minValue="0"  decimalSeparator="." thousandSeparator="," style="width:100%"/>                  
                                </f:facet> 
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="#{msg.hriesgoAlto}" style="width:20%" styleClass="align-right">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{elem.cnfRiesgoAlto}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputNumber value="#{elem.cnfRiesgoAlto}" minValue="0"  decimalSeparator="." thousandSeparator="," style="width:100%"/>                  
                                </f:facet> 
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="#{msg.hriesgoMedio}" style="width:20%" styleClass="align-right">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{elem.cnfRiesgoMedio}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputNumber  value="#{elem.cnfRiesgoMedio}" minValue="0"  decimalSeparator="." thousandSeparator="," style="width:100%"/>                  
                                </f:facet> 
                            </p:cellEditor>
                        </p:column>
                    </p:dataTable>

                </p:panel>
            </div>

            <div class="col-sm-6" >
                <p:panel class="codiguera" header="Desempeño"> 
                    <p:dataTable                                          
                        var="elem"                          
                        value="#{alertasTempranasConfigBean.config.cnfAlertaDesempenio}"                          
                        emptyMessage="#{msg.noHayResultados}"		
                        paginator="false"
                        editable="true" 
                        editMode="cell"
                        reflow="true" >

                        <p:column headerText="Categoría" style="width:40%">
                            <h:outputText value="#{elem.cnfNombre}" />
                        </p:column>
                        <p:column headerText="#{msg.hriesgoMuyAlto}" style="width:20%" styleClass="align-right">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{elem.cnfRiesgoMuyAlto}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputNumber value="#{elem.cnfRiesgoMuyAlto}" minValue="0"  decimalSeparator="." thousandSeparator="," style="width:100%"/>                  
                                </f:facet> 
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="#{msg.hriesgoAlto}" style="width:20%" styleClass="align-right">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{elem.cnfRiesgoAlto}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputNumber value="#{elem.cnfRiesgoAlto}" minValue="0"  decimalSeparator="." thousandSeparator="," style="width:100%"/>                  
                                </f:facet> 
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="#{msg.hriesgoMedio}" style="width:20%" styleClass="align-right">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{elem.cnfRiesgoMedio}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputNumber  value="#{elem.cnfRiesgoMedio}" minValue="0"  decimalSeparator="." thousandSeparator="," style="width:100%"/>                  
                                </f:facet> 
                            </p:cellEditor>
                        </p:column>
                    </p:dataTable>

                </p:panel>
            </div>

            <div class="col-sm-12" >
                <p:panel class="codiguera" header="Manifestación de Violencia"> 
                    <p:dataTable                                          
                        var="elem"                          
                        value="#{alertasTempranasConfigBean.config.cnfAlertaManifestacionViolencia}"                          
                        emptyMessage="#{msg.noHayResultados}"		
                        paginator="false"
                        rowIndexVar="rowIndex"
                        reflow="true" >

                        <p:column headerText="Categoría" style="width:40%">
                            <h:outputText value="#{elem.cnfCategoria.cavNombre}" />
                        </p:column>
                        <p:column headerText="#{msg.hriesgoMuyAlto}" style="width:20%">


                            <p:autoComplete
                                styleClass="form-control texto-medio"
                                value="#{elem.cnfRiesgoMuyAlto}"
                                completeMethod="#{alertasTempranasConfigBean.completeTipoManifestacion}"
                                var="tma" itemLabel="#{tma.tmaNombre}" 
                                itemValue="#{tma}" 
                                onclick="PF('#{elem.cnfCategoria.cavPk}_b_riesgo_muy_alto_manif').search(PF('#{elem.cnfCategoria.cavPk}_b_riesgo_muy_alto_manif').input.val())"
                                widgetVar="#{elem.cnfCategoria.cavPk}_b_riesgo_muy_alto_manif"
                                forceSelection="true"
                                queryDelay="500"
                                placeholder="#{msg.autoCompleteEmptyItem}"
                                converter="#{tipoManifestacionConverter}"
                                multiple="true" unique="true" >
                                <f:attribute name="cnf" value="#{elem}" />
                            </p:autoComplete>

                        </p:column>
                        <p:column headerText="#{msg.hriesgoAlto}" style="width:20%">
                            <p:autoComplete 
                                styleClass="form-control texto-medio"
                                value="#{elem.cnfRiesgoAlto}"
                                completeMethod="#{alertasTempranasConfigBean.completeTipoManifestacion}"
                                var="tma" itemLabel="#{tma.tmaNombre}" 
                                itemValue="#{tma}" 
                                onclick="PF('#{elem.cnfCategoria.cavPk}_b_riesgo_alto_manif').search(PF('#{elem.cnfCategoria.cavPk}_b_riesgo_alto_manif').input.val())"
                                widgetVar="#{elem.cnfCategoria.cavPk}_b_riesgo_alto_manif"
                                forceSelection="true"
                                queryDelay="500"
                                placeholder="#{msg.autoCompleteEmptyItem}"
                                converter="#{tipoManifestacionConverter}"
                                multiple="true" unique="true" >
                                <f:attribute name="cnf" value="#{elem}" />
                            </p:autoComplete>
                        </p:column>
                        <p:column headerText="#{msg.hriesgoMedio}" style="width:20%">
                            <p:autoComplete
                                styleClass="form-control texto-medio"
                                value="#{elem.cnfRiesgoMedio}"
                                completeMethod="#{alertasTempranasConfigBean.completeTipoManifestacion}"
                                var="tma" itemLabel="#{tma.tmaNombre}" 
                                itemValue="#{tma}" 
                                onclick="PF('#{elem.cnfCategoria.cavPk}_b_riesgo_medio_manif').search(PF('#{elem.cnfCategoria.cavPk}_b_riesgo_medio_manif').input.val())"
                                widgetVar="#{elem.cnfCategoria.cavPk}_b_riesgo_medio_manif"
                                forceSelection="true"
                                queryDelay="500"
                                placeholder="#{msg.autoCompleteEmptyItem}"
                                converter="#{tipoManifestacionConverter}"
                                multiple="true" unique="true" >
                                <f:attribute name="cnf" value="#{elem}" />
                            </p:autoComplete>
                        </p:column>
                    </p:dataTable>

                </p:panel>
            </div>

            <div class="col-sm-12" >
                <p:panel class="codiguera" header="Trabajo"> 
                    <p:dataTable                                        
                        var="elem"                          
                        value="#{alertasTempranasConfigBean.config.cnfAlertaTrabajo}"                          
                        emptyMessage="#{msg.noHayResultados}"		
                        paginator="false"
                        rowIndexVar="rowIndex"
                        reflow="true" >

                        <p:column headerText="Categoría" style="width:40%">
                            <h:outputText value="#{elem.cnfCategoria.text}" />
                        </p:column>
                        <p:column headerText="#{msg.hriesgoMuyAlto}" style="width:20%">


                            <p:autoComplete
                                styleClass="form-control texto-medio"
                                value="#{elem.cnfRiesgoMuyAlto}"
                                completeMethod="#{alertasTempranasConfigBean.completeTipoTrabajo}"
                                var="ttr" itemLabel="#{ttr.ttrNombre}" 
                                itemValue="#{ttr}" 
                                onclick="PF('#{rowIndex}_b_riesgo_muy_alto_tipo_trab').search(PF('#{rowIndex}_b_riesgo_muy_alto_tipo_trab').input.val())"
                                widgetVar="#{rowIndex}_b_riesgo_muy_alto_tipo_trab"
                                forceSelection="true"
                                queryDelay="500"
                                placeholder="#{msg.autoCompleteEmptyItem}"
                                converter="#{tipoTrabajoConverter}"
                                multiple="true" unique="true" >
                            </p:autoComplete>


                        </p:column>
                        <p:column headerText="#{msg.hriesgoAlto}" style="width:20%">
                            <p:autoComplete
                                styleClass="form-control texto-medio"
                                value="#{elem.cnfRiesgoAlto}"
                                completeMethod="#{alertasTempranasConfigBean.completeTipoTrabajo}"
                                var="ttr" itemLabel="#{ttr.ttrNombre}" 
                                itemValue="#{ttr}" 
                                onclick="PF('#{rowIndex}_b_riesgo_alto_tipo_trab').search(PF('#{rowIndex}_b_riesgo_alto_tipo_trab').input.val())"
                                widgetVar="#{rowIndex}_b_riesgo_alto_tipo_trab"
                                forceSelection="true"
                                queryDelay="500"
                                placeholder="#{msg.autoCompleteEmptyItem}"
                                converter="#{tipoTrabajoConverter}"
                                multiple="true" unique="true" >
                            </p:autoComplete>
                        </p:column>
                        <p:column headerText="#{msg.hriesgoMedio}" style="width:20%">
                            <p:autoComplete
                                styleClass="form-control texto-medio"
                                value="#{elem.cnfRiesgoMedio}"
                                completeMethod="#{alertasTempranasConfigBean.completeTipoTrabajo}"
                                var="ttr" itemLabel="#{ttr.ttrNombre}" 
                                itemValue="#{ttr}" 
                                onclick="PF('#{rowIndex}_b_riesgo_medio_tipo_trab').search(PF('#{rowIndex}_b_riesgo_medio_tipo_trab').input.val())"
                                widgetVar="#{rowIndex}_b_riesgo_medio_tipo_trab"
                                forceSelection="true"
                                queryDelay="500"
                                placeholder="#{msg.autoCompleteEmptyItem}"
                                converter="#{tipoTrabajoConverter}"
                                multiple="true" unique="true" >
                            </p:autoComplete>
                        </p:column>
                    </p:dataTable>

                </p:panel>
            </div>

            <div class="col-sm-6" >
                <p:panel class="codiguera" header="Sobreedad"> 
                    <p:dataTable                                              
                        var="elem"                          
                        value="#{alertasTempranasConfigBean.config.cnfAlertaSobreedad}"                          
                        emptyMessage="#{msg.noHayResultados}"		
                        paginator="false"
                        editable="true" 
                        editMode="cell"
                        reflow="true" >

                        <p:column headerText="Categoría" style="width:40%">
                            <h:outputText value="#{elem.cnfNombre}" />
                        </p:column>
                        <p:column headerText="#{msg.hriesgoMuyAlto}" style="width:20%" styleClass="align-right">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{elem.cnfRiesgoMuyAlto}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputNumber value="#{elem.cnfRiesgoMuyAlto}" minValue="0"  decimalSeparator="." thousandSeparator="," style="width:100%"/>                  
                                </f:facet> 
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="#{msg.hriesgoAlto}" style="width:20%" styleClass="align-right">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{elem.cnfRiesgoAlto}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputNumber value="#{elem.cnfRiesgoAlto}" minValue="0"  decimalSeparator="." thousandSeparator="," style="width:100%"/>                  
                                </f:facet> 
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="#{msg.hriesgoMedio}" style="width:20%" styleClass="align-right">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{elem.cnfRiesgoMedio}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputNumber  value="#{elem.cnfRiesgoMedio}" minValue="0"  decimalSeparator="." thousandSeparator="," style="width:100%"/>                  
                                </f:facet> 
                            </p:cellEditor>
                        </p:column>
                    </p:dataTable>

                </p:panel>
            </div>


            <div class="col-sm-6" >
                <p:panel class="codiguera" header="Embarazo"> 
                    <p:selectOneRadio layout="grid" columns="4" value="#{alertasTempranasConfigBean.config.cnfRiesgoEmbarazo}">
                        <f:selectItems value="#{EnumRiesgoAlerta}"  var="item" itemValue="#{item}" itemLabel="#{item.text}"/>
                    </p:selectOneRadio>
                </p:panel>
            </div>

            <div class="col-sm-6" >
                <p:panel class="codiguera" header="Madre"> 
                    <p:selectOneRadio layout="grid" columns="4" value="#{alertasTempranasConfigBean.config.cnfRiesgoMadre}">
                        <f:selectItems value="#{EnumRiesgoAlerta}"  var="item" itemValue="#{item}" itemLabel="#{item.text}"/>
                    </p:selectOneRadio>
                </p:panel>
            </div>

            <div class="col-sm-6" >
                <p:panel class="codiguera" header="Acompañado"> 
                    <p:selectOneRadio layout="grid" columns="4" value="#{alertasTempranasConfigBean.config.cnfRiesgoAcompaniado}">
                        <f:selectItems value="#{EnumRiesgoAlerta}"  var="item" itemValue="#{item}" itemLabel="#{item.text}"/>
                    </p:selectOneRadio>
                </p:panel>
            </div>

            <div class="col-sm-6" >
                <p:panel class="codiguera" header="Matrimonio"> 
                    <p:selectOneRadio layout="grid" columns="4" value="#{alertasTempranasConfigBean.config.cnfRiesgoMatrimonio}">
                        <f:selectItems value="#{EnumRiesgoAlerta}" var="item" itemValue="#{item}" itemLabel="#{item.text}"/>
                    </p:selectOneRadio>
                </p:panel>
            </div>

            <div class="col-sm-12" >
                <div class="form-action-buttons">
                    <p:commandButton  id="btnGuardar" value="#{msg.guardar}" action="#{alertasTempranasConfigBean.guardar()}" 
                                     update="@form" styleClass="btn btn-primary" icon="glyphicon glyphicon-floppy-disk"/>
                    <p:blockUI block="@form" trigger="btnGuardar" />
                    <p:defaultCommand target="btnGuardar" scope="@form"/>  
                </div>

            </div>



        </p:outputPanel>
    </h:form>
</ui:composition>

