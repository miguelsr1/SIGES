<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui">


    <h:form id="form">    

        <f:passThroughAttribute name="autocomplete" value="off"/>
        <p:blockUI block="@form" widgetVar="formBlocker" /> 
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#{ConstantesPaginas.ENCUESTAS_ESTUDIANTES}.xhtml">#{msg.hencuestas}</a></li>
                <li class="breadcrumb-item active" aria-current="page">
                    <h:outputText value="#{msg.hactualizacionDatosDelEstudiante}" />
                </li>
            </ol>
        </nav>

        <p:outputPanel styleClass="panel-titulo-pagina">
            <h2 class="page-header"><h:outputText value="#{msg.hactualizacionDatosDelEstudiante}"/></h2>

            <p:outputPanel styleClass="float-right">


                <ui:include src="componentes/ayudaComponente.xhtml">
                    <ui:param name="ayuda" id="uso" value="#{ayudaBean.getAyuda(ConstantesAyuda.ENCUESTA_ESTUDIANTE)}" />
                </ui:include>
            </p:outputPanel>

            <div class="lineaHeader"><div class="verde"></div><div class="amarillo"></div><div class="rojo"></div><div class="celeste"></div></div>
        </p:outputPanel>



        <p:outputPanel id="itemDetail">
            <div class="requeridos" style="text-align:right;"><h:outputText value="#{msg.textoCamposObligatorios}"/></div>

            <p:outputPanel styleClass="ui-messages" rendered="#{encuestaEstudianteBean.mensajeEncuestaEstudiante != null}">
                <div class="ui-messages-warn ui-corner-all">
                    <ul>
                        <li class="control-inline">
                            <h:outputText styleClass="ui-messages-warn-summary" value="#{encuestaEstudianteBean.mensajeEncuestaEstudiante}" style="padding-right: 15px"/>
                        </li>
                    </ul>
                </div>
            </p:outputPanel>

            <p:outputPanel styleClass="form-group row" rendered="#{encuestaEstudianteBean.entidadEnEdicion.encPk != null}">
                <h:outputLabel value="Fecha de creación:" styleClass="col-sm-3 col-form-label"/>
                <p:outputPanel styleClass="col-sm-9">
                    <h:outputText styleClass="form-control-plaintext" value="#{encuestaEstudianteBean.entidadEnEdicion.encFechaIngreso}" converter="#{localDateTimeConverter}"/>
                </p:outputPanel>   
            </p:outputPanel> 
            
            <p:outputPanel styleClass="form-group row" rendered="#{encuestaEstudianteBean.entidadEnEdicion.encPk != null}">
                <h:outputLabel value="Fecha de modificación:" styleClass="col-sm-3 col-form-label"/>
                <p:outputPanel styleClass="col-sm-9">
                    <h:outputText styleClass="form-control-plaintext" value="#{encuestaEstudianteBean.entidadEnEdicion.encUltModFecha}" converter="#{localDateTimeConverter}"/>
                </p:outputPanel>   
            </p:outputPanel> 
            
            <p:outputPanel styleClass="form-group row" id="fila_input_nie">
                <h:outputLabel value="#{msg.nie}" styleClass="col-sm-3 col-form-label"/>
                <p:outputPanel styleClass="col-sm-4">
                    <p:inputNumber autocomplete="off" decimalPlaces="0" thousandSeparator="" styleClass="form-control"
                                   rendered="#{encuestaEstudianteBean.entidadEnEdicion.encPk == null and encuestaEstudianteBean.estId == null}"
                                   value="#{encuestaEstudianteBean.estudianteNie}" />
                    <h:outputText rendered="#{encuestaEstudianteBean.entidadEnEdicion.encPk != null or encuestaEstudianteBean.estId != null}"
                                  value="#{encuestaEstudianteBean.estudianteEnEdicion.estPersona.perNie}" styleClass="form-control-plaintext"/>
                </p:outputPanel>
                <p:outputPanel styleClass="col-sm-5">
                    <p:commandButton value="#{msg.buscar}"
                                     rendered="#{encuestaEstudianteBean.entidadEnEdicion.encPk == null and encuestaEstudianteBean.estId == null}"
                                     action="#{encuestaEstudianteBean.buscarEstudiante()}" 
                                     update="@form" 
                                     id="btnbuscarEstudianteNie" styleClass="btn btn-primary" icon="glyphicon glyphicon-search"  />
                    <p:blockUI block="@form" trigger="btnbuscarEstudianteNie"/>
                    <p:defaultCommand target="btnbuscarEstudianteNie" scope="fila_input_nie"/>
                </p:outputPanel>



            </p:outputPanel>

            <h:panelGroup id="formulario_encuesta" rendered="#{(not empty encuestaEstudianteBean.entidadEnEdicion) and (not empty encuestaEstudianteBean.estudianteEnEdicion)}"  >

                <p:outputPanel styleClass="form-group row">
                    <h:outputLabel value="#{msg.nombre}" styleClass="col-sm-3 col-form-label"/>
                    <p:outputPanel styleClass="col-sm-9">
                        <h:outputText styleClass="form-control-plaintext" value="#{encuestaEstudianteBean.estudianteEnEdicion.estPersona.perNombreCompleto}" />
                    </p:outputPanel>   
                </p:outputPanel> 

                <p:outputPanel styleClass="form-group row">
                    <h:outputLabel value="#{msg.sexo}" styleClass="col-sm-3 col-form-label"/>
                    <p:outputPanel styleClass="col-sm-9">
                        <h:outputText styleClass="form-control-plaintext" value="#{encuestaEstudianteBean.estudianteEnEdicion.estPersona.perSexo.sexNombre}" />
                    </p:outputPanel>   
                </p:outputPanel> 

                <p:outputPanel styleClass="form-group row">
                    <h:outputLabel value="#{msg.fechaNacimiento}" styleClass="col-sm-3 col-form-label"/>
                    <p:outputPanel styleClass="col-sm-9">
                        <h:outputText styleClass="form-control-plaintext" value="#{encuestaEstudianteBean.estudianteEnEdicion.estPersona.perFechaNacimiento}" converter="#{localDateConverter}"/>
                    </p:outputPanel>   
                </p:outputPanel> 

                <p:outputPanel styleClass="form-group row">
                    <h:outputLabel value="#{msg.referente}" styleClass="col-sm-3 col-form-label"/>
                    <p:outputPanel styleClass="col-sm-9">
                        <h:outputText rendered="#{encuestaEstudianteBean.referente != null}" styleClass="form-control-plaintext" value="#{encuestaEstudianteBean.referente.allPersona.perNombreCompleto}" />
                        <h:outputText rendered="#{encuestaEstudianteBean.referente != null}" styleClass="form-control-plaintext" style="white-space: pre-wrap;" value="#{encuestaEstudianteBean.referente.allPersona.perIdentificacionesAsString}" /> 
                        <h:outputText rendered="#{encuestaEstudianteBean.referente != null}" styleClass="form-control-plaintext"  value="#{msg.sexo} #{encuestaEstudianteBean.referente.allPersona.perSexo.sexNombre}"/>
                        <h:outputText rendered="#{encuestaEstudianteBean.referente != null}" styleClass="form-control-plaintext"  value="#{msg.htipoParentesco} #{encuestaEstudianteBean.referente.allTipoParentesco.tpaNombre}"/>
                        <p:outputPanel rendered="#{encuestaEstudianteBean.referente == null}" styleClass="ui-messages texto-medio">
                            <div class="ui-messages-warn ui-corner-all">
                                <span class="ui-messages-warn-icon"></span>
                                <ul>
                                    <li>
                                        <h:outputText styleClass="ui-messages-warn-summary" value="El estudiante no tiene referente - " />
                                        <p:link outcome="#{ConstantesPaginas.ESTUDIANTE}" title="#{msg.agregar}" target="blank" styleClass="btn btn-link" style="padding:0px; margin-top:-3px;">
                                            <f:param name="id" value="#{encuestaEstudianteBean.estudianteEnEdicion.estPk}"/>
                                            <f:param name="edit" value="true"/>
                                            <f:param name="tab" value="f"/>
                                            <h:outputText value="#{msg.agregar}"/>
                                        </p:link>
                                    </li>
                                </ul>
                            </div>
                        </p:outputPanel>

                    </p:outputPanel>   
                </p:outputPanel> 



                <!-- DATOS ENCUESTA -->


                <p:outputPanel styleClass="form-group row" id="fila_input_zona">
                    <h:outputLabel value="#{msg.zonaResidencia}" for="input_zona" styleClass="col-sm-3 col-form-label obligatorio"/>                        
                    <p:outputPanel styleClass="col-sm-9">                            
                        <h:selectOneMenu id="input_zona" value="#{encuestaEstudianteBean.comboZona.selected}" 
                                         rendered="#{!encuestaEstudianteBean.soloLectura}" styleClass="form-control dropdown texto-medio">                                
                            <f:selectItems value="#{encuestaEstudianteBean.comboZona.items}"/>
                            <p:ajax listener="#{encuestaEstudianteBean.comboZonaSelected()}" event="change" process="@this"/>
                        </h:selectOneMenu>
                        <h:outputText rendered="#{encuestaEstudianteBean.soloLectura}" styleClass="form-control-plaintext"
                                      value="#{encuestaEstudianteBean.entidadEnEdicion.encZonaResidencia.zonNombre}"/>
                    </p:outputPanel>                                                                                   
                </p:outputPanel> 


                <p:outputPanel styleClass="form-group row" >
                    <h:outputText value="#{msg.cuantosDormitoriosTieneSuCasa}" styleClass="col-sm-3 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-9">
                        <p:inputNumber rendered="#{!encuestaEstudianteBean.soloLectura}"
                                       value="#{encuestaEstudianteBean.entidadEnEdicion.encCantidadDormitoriosCasa}" 
                                       styleClass="form-control texto-medio" 
                                       decimalPlaces="0" minValue="0" maxValue="20" /> 
                        <h:outputText rendered="#{encuestaEstudianteBean.soloLectura}" styleClass="form-control-plaintext"
                                      value="#{encuestaEstudianteBean.entidadEnEdicion.encCantidadDormitoriosCasa}"/>
                    </p:outputPanel>
                </p:outputPanel>

                <p:outputPanel styleClass="form-group row" >
                    <h:outputText value="#{msg.enSuHogarCuentaConLoSiguiente}" styleClass="col-sm-3 col-form-label"/>
                    <p:outputPanel styleClass="col-sm-9">
                        <p:autoComplete id="input_elemento_hogar_autocomplete" 
                                        styleClass="form-control texto-medio"
                                        value="#{encuestaEstudianteBean.entidadEnEdicion.encElementosHogar}"
                                        rendered="#{!encuestaEstudianteBean.soloLectura}"
                                        completeMethod="#{encuestaEstudianteBean.completeElementosHogar}"
                                        var="ele" itemLabel="#{ele.ehoNombre}" 
                                        itemValue="#{ele}" 
                                        onclick="PF('elem_hogar_autocomplete').search(PF('elem_hogar_autocomplete').input.val())"
                                        widgetVar="elem_hogar_autocomplete"
                                        forceSelection="true"
                                        queryDelay="500"
                                        placeholder="#{msg.autoCompleteEmptyItem}"
                                        converter="#{elementoHogarConverter}"
                                        multiple="true" unique="true" >
                            <p:ajax event="itemSelect"  process="@this" update="input_elemento_hogar_autocomplete"/>
                        </p:autoComplete>
                        <h:outputText rendered="#{encuestaEstudianteBean.soloLectura}" styleClass="form-control-plaintext"
                                      value="#{encuestaEstudianteBean.entidadEnEdicion.encElementosHogarString}"/>
                    </p:outputPanel>
                </p:outputPanel>

                <p:outputPanel styleClass="form-group row" >
                    <h:outputText value="#{msg.cuentaConServicioDeEnergiaElectricaEnSuCasa}" styleClass="col-sm-3 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-9">         
                        <p:selectOneRadio layout="responsive" columns="3" 
                                          disabled="#{encuestaEstudianteBean.soloLectura}" 
                                          value="#{encuestaEstudianteBean.entidadEnEdicion.encTieneServicioEnergiaElectricaResidencial}">
                            <f:selectItems value="#{applicationBean.booleanValues}"  />
                        </p:selectOneRadio>
                    </p:outputPanel>
                </p:outputPanel>

                <p:outputPanel styleClass="form-group row" >
                    <h:outputText value="#{msg.cualEsLaFuenteDeAbastecimientoDeAguaEnSuCasa}" styleClass="col-sm-3 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-9">         
                        <h:selectOneMenu value="#{encuestaEstudianteBean.comboFuentesAbastecimientoAgua.selected}"
                                         rendered="#{!encuestaEstudianteBean.soloLectura}"
                                         styleClass="form-control texto-medio">
                            <f:selectItems value="#{encuestaEstudianteBean.comboFuentesAbastecimientoAgua.items}" />
                            <p:ajax update="fila_input_estudiante_fuente_abastecimiento_otra" listener="#{encuestaEstudianteBean.comboFuentesAbastecimientoAguaSelected}" event="change" />
                        </h:selectOneMenu>
                        <h:outputText rendered="#{encuestaEstudianteBean.soloLectura}" styleClass="form-control-plaintext"
                                      value="#{encuestaEstudianteBean.entidadEnEdicion.encFuenteAbastecimientoAguaResidencial.faaNombre}"/>
                    </p:outputPanel>
                </p:outputPanel>

                <h:panelGroup id="fila_input_estudiante_fuente_abastecimiento_otra">
                    <p:outputPanel styleClass="form-group row" 
                                   rendered="#{encuestaEstudianteBean.renderIngresarOtraFuenteAbastecimientoDeAgua}">
                        <h:outputLabel value="Otra fuente:"
                                       styleClass="col-sm-3 col-form-label"/>
                        <p:outputPanel styleClass="col-sm-9">
                            <h:inputText autocomplete="off" 
                                         styleClass="form-control texto-medio" 
                                         value="#{encuestaEstudianteBean.entidadEnEdicion.encFuenteAbastecimientoAguaResidencialOtra}" 
                                         rendered="#{!encuestaEstudianteBean.soloLectura}"/>                        
                            <h:outputText rendered="#{encuestaEstudianteBean.soloLectura}" styleClass="form-control-plaintext" 
                                          value="#{encuestaEstudianteBean.entidadEnEdicion.encFuenteAbastecimientoAguaResidencialOtra}"/>
                        </p:outputPanel>
                    </p:outputPanel>
                </h:panelGroup>

                <p:outputPanel styleClass="form-group row" >
                    <h:outputText value="#{msg.cualEsElMaterialPrincipalDelPisoEnSuCasa}" styleClass="col-sm-3 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-9">         
                        <h:selectOneMenu value="#{encuestaEstudianteBean.comboMaterialesPiso.selected}"
                                         rendered="#{!encuestaEstudianteBean.soloLectura}"
                                         styleClass="form-control texto-medio">
                            <f:selectItems value="#{encuestaEstudianteBean.comboMaterialesPiso.items}" />
                            <p:ajax update="fila_input_estudiante_material_piso_otro" listener="#{encuestaEstudianteBean.comboMaterialesPisoSelected}" event="change" />
                        </h:selectOneMenu>
                        <h:outputText rendered="#{encuestaEstudianteBean.soloLectura}" styleClass="form-control-plaintext"
                                      value="#{encuestaEstudianteBean.entidadEnEdicion.encMaterialPisoResidencial.mapNombre}"/>
                    </p:outputPanel>
                </p:outputPanel>

                <h:panelGroup id="fila_input_estudiante_material_piso_otro">
                    <p:outputPanel styleClass="form-group row" 
                                   rendered="#{encuestaEstudianteBean.renderIngresarOtroMaterialDePiso}">
                        <h:outputLabel value="Otro material:"
                                       styleClass="col-sm-3 col-form-label"/>
                        <p:outputPanel styleClass="col-sm-9">
                            <h:inputText autocomplete="off" 
                                         styleClass="form-control texto-medio" 
                                         value="#{encuestaEstudianteBean.entidadEnEdicion.encMaterialPisoResidencialOtro}" 
                                         rendered="#{!encuestaEstudianteBean.soloLectura}"/>                        
                            <h:outputText rendered="#{encuestaEstudianteBean.soloLectura}" styleClass="form-control-plaintext" 
                                          value="#{encuestaEstudianteBean.entidadEnEdicion.encMaterialPisoResidencialOtro}"/>
                        </p:outputPanel>
                    </p:outputPanel>
                </h:panelGroup>

                <p:outputPanel styleClass="form-group row" >
                    <h:outputText value="#{msg.queTipoDeServicioSanitarioTieneSuCasa}" styleClass="col-sm-3 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-9">
                        <h:selectOneMenu value="#{encuestaEstudianteBean.comboTipoServicioSanitario.selected}"
                                         rendered="#{!encuestaEstudianteBean.soloLectura}"
                                         styleClass="form-control texto-medio">
                            <f:selectItems value="#{encuestaEstudianteBean.comboTipoServicioSanitario.items}" />
                            <p:ajax update="fila_input_estudiante_servicio_sanitario_otro" listener="#{encuestaEstudianteBean.comboTipoServicioSanitarioSelected}" event="change" />
                        </h:selectOneMenu>
                        <h:outputText rendered="#{encuestaEstudianteBean.soloLectura}" styleClass="form-control-plaintext"
                                      value="#{encuestaEstudianteBean.entidadEnEdicion.encTipoServicioSanitarioResidencial.tssNombre}"/>
                    </p:outputPanel>
                </p:outputPanel>


                <h:panelGroup id="fila_input_estudiante_servicio_sanitario_otro">
                    <p:outputPanel styleClass="form-group row" 
                                   rendered="#{encuestaEstudianteBean.renderIngresarOtroServicioSanitario}">
                        <h:outputLabel value="Otro servicio:"
                                       styleClass="col-sm-3 col-form-label"/>
                        <p:outputPanel styleClass="col-sm-9">
                            <h:inputText autocomplete="off" 
                                         styleClass="form-control texto-medio" 
                                         value="#{encuestaEstudianteBean.entidadEnEdicion.encTipoServicioSanitarioResidencialOtro}" 
                                         rendered="#{!encuestaEstudianteBean.soloLectura}"/>                        
                            <h:outputText rendered="#{encuestaEstudianteBean.soloLectura}" styleClass="form-control-plaintext" 
                                          value="#{encuestaEstudianteBean.entidadEnEdicion.encTipoServicioSanitarioResidencialOtro}"/>
                        </p:outputPanel>
                    </p:outputPanel>
                </h:panelGroup>



                <p:outputPanel styleClass="form-group row" >
                    <h:outputText value="#{msg.tieneAlgunTipoDeConexionAInternetResidencial}" styleClass="col-sm-3 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-9">         
                        <p:selectOneRadio layout="responsive" columns="3"
                                          disabled="#{encuestaEstudianteBean.soloLectura}" 
                                          value="#{encuestaEstudianteBean.entidadEnEdicion.encTieneConexionInternetResidencial}">
                            <f:selectItems value="#{applicationBean.booleanValues}"  />
                            <p:ajax update="fila_compania_internet_residencial" />
                        </p:selectOneRadio>
                    </p:outputPanel>
                </p:outputPanel>


                <p:outputPanel id="fila_compania_internet_residencial">
                    <p:outputPanel styleClass="form-group row" rendered="#{encuestaEstudianteBean.entidadEnEdicion.encTieneConexionInternetResidencial}">
                        <h:outputText value="#{msg.conCualCompania}" styleClass="col-sm-3 col-form-label obligatorio"/>
                        <p:outputPanel styleClass="col-sm-9">         
                            <h:selectOneMenu value="#{encuestaEstudianteBean.comboCompaniasTelecomunicacion.selected}"
                                             rendered="#{!encuestaEstudianteBean.soloLectura}"
                                             styleClass="form-control texto-medio">
                                <f:selectItems value="#{encuestaEstudianteBean.comboCompaniasTelecomunicacion.items}" />
                                <p:ajax listener="#{encuestaEstudianteBean.comboCompaniasTelecomunicacionSelected}" event="change" />
                            </h:selectOneMenu>
                            <h:outputText rendered="#{encuestaEstudianteBean.soloLectura}" styleClass="form-control-plaintext"
                                          value="#{encuestaEstudianteBean.entidadEnEdicion.encCompaniaInternetResidencial.cteNombre}"/>
                        </p:outputPanel>
                    </p:outputPanel>
                </p:outputPanel>

                <p:outputPanel styleClass="form-group row" id="fila_input_estudiante_distancia">
                    <h:outputLabel value="#{msg.distanciacentrokm}" for="input_estudiante_distancia" styleClass="col-sm-3 col-form-label  obligatorio"/>
                    <p:outputPanel styleClass="col-sm-9">
                        <p:inputNumber autocomplete="off" id="input_estudiante_distancia"
                                       rendered="#{!encuestaEstudianteBean.soloLectura}"
                                       value="#{encuestaEstudianteBean.entidadEnEdicion.encEstudianteDisKmCentro}"
                                       styleClass="form-control texto-corto"
                                       maxlength="255"/>
                        <h:outputText rendered="#{encuestaEstudianteBean.soloLectura}" styleClass="form-control-plaintext"
                                      value="#{encuestaEstudianteBean.entidadEnEdicion.encEstudianteDisKmCentro}"/>
                    </p:outputPanel>
                </p:outputPanel>
                
             
                
                <p:outputPanel styleClass="form-group row" >
                    <h:outputText value="¿Puede sintonizar en su casa canal 10?:" styleClass="col-sm-3 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-9">
                        <p:selectOneRadio layout="responsive" columns="3"
                                          disabled="#{encuestaEstudianteBean.soloLectura}" 
                                          value="#{encuestaEstudianteBean.entidadEnEdicion.encSintonizaCanal10}">
                            <f:selectItems value="#{applicationBean.booleanValues}" />
                        </p:selectOneRadio>
                    </p:outputPanel>
                </p:outputPanel>
                
                <p:outputPanel styleClass="form-group row" >
                    <h:outputText value="¿Sintoniza la franja educativa?:" styleClass="col-sm-3 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-9">
                        <p:selectOneRadio layout="responsive" columns="3"
                                          disabled="#{encuestaEstudianteBean.soloLectura}" 
                                          value="#{encuestaEstudianteBean.entidadEnEdicion.encSintonizaFranjaEducativa}">
                            <f:selectItems value="#{applicationBean.booleanValues}" />
                        </p:selectOneRadio>
                    </p:outputPanel>
                </p:outputPanel>

                <p:outputPanel styleClass="form-group row" >
                    <h:outputText value="#{msg.cantidadPersonasVivenConEstudiante}" styleClass="col-sm-3 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-9">
                        <p:inputNumber rendered="#{!encuestaEstudianteBean.soloLectura}"
                                       value="#{encuestaEstudianteBean.entidadEnEdicion.encViveConCantidad}" 
                                       styleClass="form-control texto-medio" 
                                       decimalPlaces="0" minValue="0" maxValue="1000" /> 
                        <h:outputText rendered="#{encuestaEstudianteBean.soloLectura}" styleClass="form-control-plaintext"
                                      value="#{encuestaEstudianteBean.entidadEnEdicion.encViveConCantidad}"/>
                    </p:outputPanel>
                </p:outputPanel>

                <p:outputPanel styleClass="form-group row" >
                    <h:outputText value="#{msg.vivenPersonasMenoresConElEstudiante}" styleClass="col-sm-3 col-form-label obligatorio"/>
                    <p:outputPanel styleClass="col-sm-9">
                        <p:selectOneRadio layout="responsive" columns="3"
                                          disabled="#{encuestaEstudianteBean.soloLectura}" 
                                          value="#{encuestaEstudianteBean.entidadEnEdicion.encViveConPersonasMenores}">
                            <f:selectItems value="#{applicationBean.booleanValues}" />
                            <p:ajax update="fila_input_menores" listener="#{encuestaEstudianteBean.viveConPersonasMenoresSelected}"/>
                        </p:selectOneRadio>
                    </p:outputPanel>
                </p:outputPanel>

                <p:outputPanel  id="fila_input_menores">
                    <p:outputPanel styleClass="form-group row" rendered="#{encuestaEstudianteBean.entidadEnEdicion.encViveConPersonasMenores}">
                        <h:outputLabel value="#{msg.menores}" styleClass="col-sm-3 col-form-label"/> 
                        <p:outputPanel styleClass="col-sm-9">  
                            <p:outputPanel styleClass="form-action-buttons">
                                <p:commandButton value="Agregar menor" icon="glyphicon glyphicon-plus" 
                                                 action="#{encuestaEstudianteBean.agregarMenor()}" 
                                                 update="form:menorDetalle" oncomplete="PF('menorDialog').show()"  
                                                 id="btnAgregarMenor" styleClass="btn btn-secondary" rendered="#{!encuestaEstudianteBean.soloLectura}"/>
                            </p:outputPanel>                            

                            <p:outputPanel id="pnlMenores">
                                <p:dataTable var="men" 
                                             emptyMessage="#{msg.noHayResultados}"
                                             value="#{encuestaEstudianteBean.entidadEnEdicion.encMenores}">
                                    <p:column headerText="#{msg.hmenor}">
                                        <h:outputText value="#{men.menNombreCompleto}" />
                                    </p:column>
                                    <p:column headerText="#{msg.hfechaNacimiento}">
                                        <h:outputText value="#{men.menFechaNacimiento}" converter="#{localDateConverter}" />
                                    </p:column>
                                    <p:column headerText="#{msg.hestudia}">
                                        <h:outputText value="#{men.menEstudia}" converter="#{booleanConverter}" />
                                    </p:column>
                                    <p:column headerText="#{msg.hnie}">
                                        <h:outputText value="#{men.menNie}" />
                                    </p:column>
                                    <p:column headerText="#{msg.centroEducativo}">
                                        <h:outputText value="#{men.menSede.sedCodigoNombre}" />
                                    </p:column>
                                    <p:column headerText="#{msg.hmedioTransporte}">
                                        <h:outputText value="#{men.menMedioTransporte.mtrNombre}" />
                                    </p:column>




                                    <p:column styleClass="columnaAcciones"  exportable="false">
                                        <p:commandButton update="form:menorDetalle"  
                                                         process="@this"
                                                         oncomplete="PF('menorDialog').show()" 
                                                         icon="glyphicon glyphicon-pencil" 
                                                         styleClass="btn btn-icono" 
                                                         rendered="#{!encuestaEstudianteBean.soloLectura}"
                                                         title="#{msg.editar}" action="#{encuestaEstudianteBean.editarMenor(men)}">
                                        </p:commandButton>
                                        <p:commandButton update="form:menorDetalle"  
                                                         process="@this"
                                                         oncomplete="PF('menorDialog').show()" 
                                                         icon="glyphicon glyphicon-eye-open" 
                                                         styleClass="btn btn-icono" 
                                                         rendered="#{encuestaEstudianteBean.soloLectura}"
                                                         title="#{msg.ver}" action="#{encuestaEstudianteBean.editarMenor(men)}">
                                        </p:commandButton>
                                    </p:column>                                                                              

                                    <p:column styleClass="columnaAcciones"  exportable="false">
                                        <p:commandButton update="form:pnlMenores"  
                                                         icon="glyphicon glyphicon-trash" 
                                                         styleClass="btn btn-icono rojo" 
                                                         title="#{msg.eliminar}" action="#{encuestaEstudianteBean.eliminarMenor(men)}"/>
                                    </p:column>                                         
                                </p:dataTable>   
                            </p:outputPanel>
                        </p:outputPanel>
                    </p:outputPanel>
                </p:outputPanel>

                <div class="form-action-buttons">
                    <p:commandButton  id="btnGuardar" value="#{msg.guardar}" action="#{encuestaEstudianteBean.guardar()}" 
                                      update="@form" styleClass="btn btn-primary" icon="glyphicon glyphicon-floppy-disk" rendered="#{!encuestaEstudianteBean.soloLectura}"/>
                    <p:blockUI block="@form" trigger="btnGuardar" />
                    <p:defaultCommand target="btnGuardar" scope="formulario_encuesta"/>  
                </div>



            </h:panelGroup>     

            <div class="volverLink">
                <p:commandLink value="#{msg.volver}" onclick="history.go(-1)" styleClass="btn btn-link"/>
            </div>
        </p:outputPanel>

        <p:dialog id="menorDialog" header="Menor" widgetVar="menorDialog" modal="true" showEffect="fade" 
                  hideEffect="fade" resizable="false" closable="true" >
            <p:outputPanel id="menorDetalle" > 
                <p:outputPanel rendered="#{encuestaEstudianteBean.menorEdicion != null}">
                    <p:messages id="popupmsg" showDetail="true" globalOnly="false" for="popupmsg" closable="true"/>   


                    <p:outputPanel styleClass="form-group row" >
                        <h:outputText value="¿Matriculado en SIGES?:" styleClass="col-sm-4 col-form-label obligatorio"/>
                        <p:outputPanel styleClass="col-sm-8">         
                            <p:selectOneRadio layout="responsive" columns="3" 
                                              disabled="#{encuestaEstudianteBean.soloLectura or encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" 
                                              value="#{encuestaEstudianteBean.menorEdicion.menMatriculadoSiges}">
                                <f:selectItems value="#{applicationBean.booleanValues}"  />
                            </p:selectOneRadio>
                        </p:outputPanel>
                    </p:outputPanel>

                    <p:outputPanel styleClass="form-group row" >
                        <h:outputText value="#{msg.tieneNie}" styleClass="col-sm-4 col-form-label obligatorio"/>
                        <p:outputPanel styleClass="col-sm-8">         
                            <p:selectOneRadio layout="responsive" columns="3" 
                                              disabled="#{encuestaEstudianteBean.soloLectura or encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" 
                                              value="#{encuestaEstudianteBean.menorEdicion.menTieneNie}">
                                <f:selectItems value="#{applicationBean.booleanValues}"  />
                                <p:ajax update="menorDetalle" process="menorDetalle"/>
                            </p:selectOneRadio>
                        </p:outputPanel>
                    </p:outputPanel>

                    <p:outputPanel id="menor_nie">
                        <p:outputPanel styleClass="form-group row" rendered="#{encuestaEstudianteBean.menorEdicion.menTieneNie}">
                            <h:outputText value="#{msg.nie}" styleClass="col-sm-4 col-form-label obligatorio"/>
                            <p:outputPanel styleClass="col-sm-8">         
                                <p:inputNumber rendered="#{!encuestaEstudianteBean.soloLectura and !encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" autocomplete="off" decimalPlaces="0" thousandSeparator="" 
                                               value="#{encuestaEstudianteBean.menorEdicion.menNie}" styleClass="form-control texto-corto" style="display: inline-block;" />

                                <p:commandButton value="Validar" style="margin-left: 5px;"
                                                 rendered="#{!encuestaEstudianteBean.soloLectura and !encuestaEstudianteBean.menorEdicion.menValidadoSIGES}"
                                                 action="#{encuestaEstudianteBean.buscarMenor()}" 
                                                 update="menorDetalle" 
                                                 process="menor_nie"
                                                 id="btnbuscarMenorNie" styleClass="btn btn-primary" icon="glyphicon glyphicon-search"  />
                                <p:blockUI block="@form" trigger="btnbuscarMenorNie"/>
                                <p:defaultCommand target="btnbuscarMenorNie" scope="menor_nie"/>

                                <h:outputText rendered="#{encuestaEstudianteBean.soloLectura or encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" styleClass="form-control-plaintext"
                                              value="#{encuestaEstudianteBean.menorEdicion.menNie}"/>
                            </p:outputPanel>
                        </p:outputPanel>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{encuestaEstudianteBean.menorEdicion.menTieneNie == null 
                                               or encuestaEstudianteBean.menorEdicion.menTieneNie == false 
                                               or encuestaEstudianteBean.menorEdicion.menValidadoSIGES}">

                        <p:outputPanel styleClass="form-group row" >   
                            <h:outputText value="#{msg.esFamiliar}" styleClass="col-sm-4 col-form-label"/>
                            <div class="col-sm-8">                                    
                                <p:selectOneRadio layout="responsive" columns="3" id="familiar"
                                                  value="#{encuestaEstudianteBean.menorEdicion.menEsFamiliar}"
                                                  disabled="#{encuestaEstudianteBean.soloLectura}">
                                    <f:selectItems value="#{applicationBean.booleanValues}" />
                                    <p:ajax update="fila_input_parentesco_c" listener="#{encuestaEstudianteBean.esFamiliarMenorSelected()}" event="change" process="@this" />
                                </p:selectOneRadio>
                            </div>
                        </p:outputPanel>

                        <h:panelGroup id="fila_input_parentesco_c">
                            <p:outputPanel styleClass="form-group row" id="fila_input_parentesco" rendered="#{encuestaEstudianteBean.menorEdicion.menEsFamiliar}">                        
                                <h:outputLabel value="#{msg.htipoParentesco}" for="input_parentesco" styleClass="col-sm-4 col-form-label obligatorio"/>                        
                                <p:outputPanel styleClass="col-sm-8">
                                    <h:selectOneMenu id="input_parentesco" value="#{encuestaEstudianteBean.comboTipoParentesco.selected}" styleClass="form-control dropdown texto-medio" 
                                                     disabled="#{encuestaEstudianteBean.soloLectura}" >
                                        <f:selectItems value="#{encuestaEstudianteBean.comboTipoParentesco.items}" />
                                        <p:ajax listener="#{encuestaEstudianteBean.comboParentescoMenorSelected()}"  event="change" />
                                    </h:selectOneMenu>                                    
                                    <h:message for="input_parentesco" styleClass="msj-danger"/>
                                </p:outputPanel>                    
                            </p:outputPanel>
                        </h:panelGroup>

                        <p:outputPanel styleClass="form-group row" >
                            <h:outputText value="Estudia:" styleClass="col-sm-4 col-form-label obligatorio"/>
                            <p:outputPanel styleClass="col-sm-8">         
                                <p:selectOneRadio layout="responsive" columns="3" 
                                                  disabled="#{encuestaEstudianteBean.soloLectura}" 
                                                  value="#{encuestaEstudianteBean.menorEdicion.menEstudia}">
                                    <f:selectItems value="#{applicationBean.booleanValues}"  />
                                </p:selectOneRadio>
                            </p:outputPanel>
                        </p:outputPanel>

                        <p:outputPanel styleClass="form-group row" id="fila_input_primerNombre">                        
                            <h:outputLabel value="#{msg.primerNombre}" for="input_primerNombre" styleClass="col-sm-4 col-form-label obligatorio"/>
                            <p:outputPanel styleClass="col-sm-8">                            
                                <h:inputText autocomplete="off" id="input_primerNombre" value="#{encuestaEstudianteBean.menorEdicion.menPrimerNombre}" styleClass="form-control texto-medio" 
                                             rendered="#{!encuestaEstudianteBean.soloLectura and !encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" maxlength="100"/>
                                <h:outputText rendered="#{encuestaEstudianteBean.soloLectura or encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" styleClass="form-control-plaintext"
                                              value="#{encuestaEstudianteBean.menorEdicion.menPrimerNombre}"/>
                            </p:outputPanel>                    
                        </p:outputPanel>

                        <p:outputPanel styleClass="form-group row" id="fila_input_segundoNombre">                        
                            <h:outputLabel value="#{msg.segundoNombre}" for="input_segundoNombre" styleClass="col-sm-4 col-form-label"/>                        
                            <p:outputPanel styleClass="col-sm-8">                            
                                <h:inputText autocomplete="off" id="input_segundoNombre" value="#{encuestaEstudianteBean.menorEdicion.menSegundoNombre}" styleClass="form-control texto-medio"
                                             rendered="#{!encuestaEstudianteBean.soloLectura and !encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" maxlength="100"/>
                                <h:outputText rendered="#{encuestaEstudianteBean.soloLectura or encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" styleClass="form-control-plaintext"
                                              value="#{encuestaEstudianteBean.menorEdicion.menSegundoNombre}"/>
                            </p:outputPanel>                    
                        </p:outputPanel>


                        <p:outputPanel styleClass="form-group row" id="fila_input_primerApellido">                        
                            <h:outputLabel value="#{msg.primerApellido}" for="input_primerApellido" styleClass="col-sm-4 col-form-label obligatorio"/>                        
                            <p:outputPanel styleClass="col-sm-8">                            
                                <h:inputText autocomplete="off" id="input_primerApellido" value="#{encuestaEstudianteBean.menorEdicion.menPrimerApellido}" styleClass="form-control texto-medio" 
                                             rendered="#{!encuestaEstudianteBean.soloLectura and !encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" maxlength="100"/>
                                <h:outputText rendered="#{encuestaEstudianteBean.soloLectura or encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" styleClass="form-control-plaintext"
                                              value="#{encuestaEstudianteBean.menorEdicion.menPrimerApellido}"/>
                            </p:outputPanel>                    
                        </p:outputPanel>

                        <p:outputPanel styleClass="form-group row" id="fila_input_segundoApellido">                        
                            <h:outputLabel value="#{msg.segundoApellido}" for="input_segundoApellido" styleClass="col-sm-4 col-form-label"/>                        
                            <p:outputPanel styleClass="col-sm-8">                            
                                <h:inputText autocomplete="off" id="input_segundoApellido" value="#{encuestaEstudianteBean.menorEdicion.menSegundoApellido}" styleClass="form-control texto-medio" 
                                             rendered="#{!encuestaEstudianteBean.soloLectura and !encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" maxlength="100"/>
                                <h:outputText rendered="#{encuestaEstudianteBean.soloLectura or encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" styleClass="form-control-plaintext"
                                              value="#{encuestaEstudianteBean.menorEdicion.menSegundoApellido}"/>
                            </p:outputPanel>                    
                        </p:outputPanel>

                        <p:outputPanel styleClass="form-group row" id="fila_input_men_fechaNacimiento">                        
                            <h:outputLabel value="#{msg.fechaNacimiento}" styleClass="col-sm-4 col-form-label obligatorio"/>                        
                            <p:outputPanel styleClass="col-sm-8">                            
                                <p:calendar value="#{encuestaEstudianteBean.menorEdicion.menFechaNacimiento}" maxdate="#{applicationBean.today()}"
                                            rendered="#{!encuestaEstudianteBean.soloLectura and !encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" pattern="#{applicationBean.patternFecha}" converterMessage="#{msg.fechaInvalida}" mask="true" converter="#{localDateConverter}" />
                                <h:outputText rendered="#{encuestaEstudianteBean.soloLectura or encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" styleClass="form-control-plaintext"
                                              value="#{encuestaEstudianteBean.menorEdicion.menFechaNacimiento}" converter="#{localDateConverter}" />
                            </p:outputPanel>                    
                        </p:outputPanel>

                        <p:outputPanel styleClass="form-group row" id="fila_input_sexo">                        
                            <h:outputLabel value="#{msg.sexo}" for="input_sexo" styleClass="col-sm-4 col-form-label obligatorio"/>                        
                            <p:outputPanel styleClass="col-sm-8">
                                <h:selectOneMenu id="input_sexo" value="#{encuestaEstudianteBean.comboSexos.selected}" styleClass="form-control dropdown texto-medio" 
                                                 rendered="#{!encuestaEstudianteBean.soloLectura and !encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" >
                                    <f:selectItems value="#{encuestaEstudianteBean.comboSexos.items}" />
                                    <p:ajax listener="#{encuestaEstudianteBean.comboSexoMenorSelected()}" event="change" />
                                </h:selectOneMenu>                   
                                <h:outputText rendered="#{encuestaEstudianteBean.soloLectura or encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" styleClass="form-control-plaintext"
                                              value="#{encuestaEstudianteBean.menorEdicion.menSexo.sexNombre}"/>
                            </p:outputPanel>                    
                        </p:outputPanel>

                        <p:outputPanel styleClass="form-group row" id="fila_input_estadoCivil">                        
                            <h:outputLabel value="#{msg.estadoCivil}" for="input_estadoCivil" styleClass="col-sm-4 col-form-label obligatorio"/>                        
                            <p:outputPanel styleClass="col-sm-8">
                                <h:selectOneMenu id="input_estadoCivil" value="#{encuestaEstudianteBean.comboEstadoCivil.selected}" styleClass="form-control dropdown texto-medio" 
                                                 rendered="#{!encuestaEstudianteBean.soloLectura and !encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" >
                                    <f:selectItems value="#{encuestaEstudianteBean.comboEstadoCivil.items}" />
                                    <p:ajax listener="#{encuestaEstudianteBean.comboEstadoCivilMenorSelected()}" event="change" />
                                </h:selectOneMenu>       
                                <h:outputText rendered="#{encuestaEstudianteBean.soloLectura or encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" styleClass="form-control-plaintext"
                                              value="#{encuestaEstudianteBean.menorEdicion.menEstadoCivil.eciNombre}"/>
                            </p:outputPanel>                    
                        </p:outputPanel>

                        <p:outputPanel styleClass="form-group row" id="fila_input_persona_nacionalidad" >
                            <h:outputLabel value="#{msg.nacionalidad}" for="input_persona_nacionalidad"
                                           styleClass="col-sm-4 col-form-label obligatorio"/>
                            <p:outputPanel styleClass="col-sm-8">
                                <h:selectOneMenu id="input_persona_nacionalidad" styleClass="form-control dropdown texto-medio"
                                                 value="#{encuestaEstudianteBean.comboNacionalidad.selected}"
                                                 rendered="#{!encuestaEstudianteBean.soloLectura and !encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" >
                                    <f:selectItems  value="#{encuestaEstudianteBean.comboNacionalidad.items}" />
                                    <p:ajax event="change" process="@this" listener="#{encuestaEstudianteBean.comboNacionalidadMenorSelected()}" />
                                </h:selectOneMenu>  
                                <h:outputText rendered="#{encuestaEstudianteBean.soloLectura or encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" styleClass="form-control-plaintext"
                                              value="#{encuestaEstudianteBean.menorEdicion.menNacionalidad.nacNombre}"/>
                            </p:outputPanel>
                        </p:outputPanel>

                        <p:outputPanel styleClass="form-group row" id="fila_input_sede_autocomplete">
                            <h:outputLabel value="#{msg.sedeEducativa}" for="input_sede_autocomplete" styleClass="col-sm-4 col-form-label"/>
                            <p:outputPanel styleClass="col-sm-8">
                                <p:autoComplete id="input_sede_autocomplete" rendered="#{!encuestaEstudianteBean.soloLectura and !encuestaEstudianteBean.menorEdicion.menValidadoSIGES}"
                                                styleClass="form-control texto-medio"
                                                value="#{encuestaEstudianteBean.menorEdicion.menSede}"
                                                completeMethod="#{encuestaEstudianteBean.completeSede}"
                                                var="sed" itemLabel="#{sed.sedCodigoNombre}"
                                                itemValue="#{sed}"
                                                forceSelection="true"
                                                maxResults="10"
                                                queryDelay="500"
                                                multiple="false"
                                                converter="#{sedesConverter}"
                                                placeholder="#{msg.autoCompleteEmptyItem}">   
                                </p:autoComplete>
                                <h:outputText rendered="#{encuestaEstudianteBean.soloLectura or encuestaEstudianteBean.menorEdicion.menValidadoSIGES}" styleClass="form-control-plaintext"
                                              value="#{encuestaEstudianteBean.menorEdicion.menSede.sedCodigoNombre}" />
                            </p:outputPanel>
                        </p:outputPanel>

                        <p:outputPanel styleClass="form-group row">                        
                            <h:outputLabel value="Medio de transporte al centro educativo:" styleClass="col-sm-4 col-form-label"/>                        
                            <p:outputPanel styleClass="col-sm-8">
                                <h:selectOneMenu value="#{encuestaEstudianteBean.comboMediosTransporte.selected}" 
                                                 rendered="#{!encuestaEstudianteBean.soloLectura}"  
                                                 styleClass="form-control dropdown texto-medio" >
                                    <f:selectItems value="#{encuestaEstudianteBean.comboMediosTransporte.items}" />
                                </h:selectOneMenu>    
                                <h:outputText rendered="#{encuestaEstudianteBean.soloLectura}" styleClass="form-control-plaintext"
                                              value="#{encuestaEstudianteBean.menorEdicion.menMedioTransporte.mtrNombre}" />
                            </p:outputPanel>                    
                        </p:outputPanel>

                    </p:outputPanel>

                    <p:outputPanel styleClass="control-group" >
                        <p:outputPanel styleClass="float-right">
                            <p:commandButton id="btnGuardarMenor" process="menorDetalle"  
                                             rendered="#{!encuestaEstudianteBean.soloLectura and (encuestaEstudianteBean.menorEdicion.menTieneNie == null 
                                                         or encuestaEstudianteBean.menorEdicion.menTieneNie == false 
                                                         or encuestaEstudianteBean.menorEdicion.menValidadoSIGES)}"  
                                             value="#{msg.aceptar}" action="#{encuestaEstudianteBean.agregarMenorAEncuesta()}"
                                             update="menorDetalle pnlMenores" styleClass="btn btn-primary" />
                            <p:commandLink value="#{msg.cancelar}" oncomplete="PF('menorDialog').hide();"  styleClass="btn btn-link"/>                        
                        </p:outputPanel>                    
                    </p:outputPanel>                     
                    <p:blockUI block="@form" trigger="btnGuardarMenor" />     
                    <p:defaultCommand target="btnGuardarMenor" scope="menorDetalle"/>     
                </p:outputPanel>
            </p:outputPanel>
        </p:dialog>


    </h:form>
</ui:composition>
