<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"                 
                xmlns="http://www.w3.org/1999/xhtml"                 
                xmlns:c="http://java.sun.com/jsp/jstl/core"                 
                xmlns:f="http://java.sun.com/jsf/core"                 
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:o="http://omnifaces.org/ui"
                xmlns:p="http://primefaces.org/ui">    

    <h:form id="form">                 

        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#{selloFirmaTitularBean.autentica?ConstantesPaginas.SELLOS_FIRMAS_AUTENTICA:ConstantesPaginas.SELLOS_FIRMAS_TITULAR}.xhtml">#{msg.gestionSelloFirma}</a></li>
                <li class="breadcrumb-item active" aria-current="page">#{selloFirmaTitularBean.tituloPagina}</li>
            </ol>
        </nav>

        <p:outputPanel styleClass="panel-titulo-pagina">
            <h2 class="page-header"><h:outputText value="#{msg.gestionSelloFirma}"/></h2>

            <p:outputPanel styleClass="float-right">


                <ui:include src="componentes/ayudaComponente.xhtml">
                    <ui:param name="ayuda" id="uso" value="#{ayudaBean.getAyuda(ConstantesAyuda.SELLO_FIRMA_TITULAR)}" /> 
                </ui:include>
            </p:outputPanel>

            <div class="lineaHeader"><div class="verde"></div><div class="amarillo"></div><div class="rojo"></div><div class="celeste"></div></div>
        </p:outputPanel>
          <h3>
            <h:outputText value="#{selloFirmaTitularBean.tituloPagina}"/>
        </h3>


        <p:outputPanel id="containerSelloFirma" >
          
            
            <p:outputPanel styleClass="form-group row" id="fila_input_primer_nombre">                        
                <h:outputLabel value="#{msg.primerNombre}" for="input_primer_nombre" styleClass="col-sm-3 col-form-label obligatorio"/>                        
                <p:outputPanel styleClass="col-sm-9">                            
                    <h:inputText autocomplete="off" id="input_primer_nombre" value="#{selloFirmaTitularBean.entidadEnEdicion.sftPrimerNombre}" disabled="#{selloFirmaTitularBean.soloLectura}" styleClass="form-control" maxlength="500"/>
                    <h:message for="input_primer_nombre" styleClass="msj-danger"/>
                </p:outputPanel>                    
            </p:outputPanel>  
            
            <p:outputPanel styleClass="form-group row" id="fila_input_segundo_nombre">                        
                <h:outputLabel value="#{msg.segundoNombre}" for="input_segundo_nombre" styleClass="col-sm-3 col-form-label "/>                        
                <p:outputPanel styleClass="col-sm-9">                            
                    <h:inputText autocomplete="off" id="input_segundo_nombre" value="#{selloFirmaTitularBean.entidadEnEdicion.sftSegundoNombre}"  styleClass="form-control" disabled="#{selloFirmaTitularBean.soloLectura}"  maxlength="500"/>
                    <h:message for="input_segundo_nombre" styleClass="msj-danger"/>
                </p:outputPanel>                    
            </p:outputPanel>
            
            <p:outputPanel styleClass="form-group row" id="fila_input_primer_apellido">                        
                <h:outputLabel value="#{msg.primerApellido}" for="input_primer_apellido" styleClass="col-sm-3 col-form-label obligatorio"/>                        
                <p:outputPanel styleClass="col-sm-9">                            
                    <h:inputText autocomplete="off" id="input_primer_apellido" value="#{selloFirmaTitularBean.entidadEnEdicion.sftPrimerApellido}" styleClass="form-control" disabled="#{selloFirmaTitularBean.soloLectura}"  maxlength="500"/>
                    <h:message for="input_primer_nombre" styleClass="msj-danger"/>
                </p:outputPanel>                    
            </p:outputPanel>
            
            <p:outputPanel styleClass="form-group row" id="fila_input_segundo_apellido">                        
                <h:outputLabel value="#{msg.segundoApellido}" for="input_segundo_apellido" styleClass="col-sm-3 col-form-label "/>                        
                <p:outputPanel styleClass="col-sm-9">                            
                    <h:inputText autocomplete="off" id="input_segundo_apellido" value="#{selloFirmaTitularBean.entidadEnEdicion.sftSegundoApellido}" styleClass="form-control" disabled="#{selloFirmaTitularBean.soloLectura}"  maxlength="500"/>
                    <h:message for="input_segundo_apellido" styleClass="msj-danger"/>
                </p:outputPanel>                    
            </p:outputPanel>
        


            <p:outputPanel styleClass="form-group row">   
                <h:outputText value="#{msg.habilitado}" styleClass="col-sm-3 col-form-label"/>
                <div class="col-sm-8">
                    <p:outputPanel styleClass="form-check">
                        <h:selectBooleanCheckbox id="input_habilitado" styleClass="form-check-input" value="#{selloFirmaTitularBean.entidadEnEdicion.sftHabilitado}" disabled="#{selloFirmaTitularBean.soloLectura}" />
                        <h:outputLabel for="input_habilitado" styleClass="form-check-label">
                            <h:outputText value="#{msg.si}"/>
                        </h:outputLabel>
                    </p:outputPanel>
                </div>
            </p:outputPanel>

            <p:outputPanel styleClass="form-group row" id="fila_input_fechaDesde">                        
                <h:outputLabel value="#{msg.fechaDesde}" for="input_fechaDesde" styleClass="col-sm-3 col-form-label obligatorio"/>                        
                <p:outputPanel styleClass="col-sm-9">                            
                    <p:calendar id="input_fechaDesde" value="#{selloFirmaTitularBean.entidadEnEdicion.sftFechaDesde}" 
                                pattern="#{applicationBean.patternFecha}" disabled="#{selloFirmaTitularBean.soloLectura}"  mask="true" converter="#{localDateConverter}" />                            
                    <h:message for="input_fechaDesde" styleClass="msj-danger"/>
                </p:outputPanel>                    
            </p:outputPanel>    

            <p:outputPanel styleClass="form-group row" id="fila_input_fechaHasta">                        
                <h:outputLabel value="#{msg.fechaHasta}" for="input_fechaHasta" styleClass="col-sm-3 col-form-label"/>                        
                <p:outputPanel styleClass="col-sm-9">                            
                    <p:calendar id="input_fechaHasta" value="#{selloFirmaTitularBean.entidadEnEdicion.sftFechaHasta}" 
                                pattern="#{applicationBean.patternFecha}" disabled="#{selloFirmaTitularBean.soloLectura}"  mask="true" converter="#{localDateConverter}" />                            
                    <h:message for="input_fechaHasta" styleClass="msj-danger"/>
                </p:outputPanel>                    
            </p:outputPanel>    

            <p:outputPanel styleClass="form-group row" id="fila_input_observacion">                        
                <h:outputLabel value="#{msg.observacion}" for="input_observacion" styleClass="col-sm-3 col-form-label"/>                        
                <p:outputPanel styleClass="col-sm-9">                            
                    <h:inputTextarea  id="input_observacion" value="#{selloFirmaTitularBean.entidadEnEdicion.sftObservaciones}" disabled="#{selloFirmaTitularBean.soloLectura}"  styleClass="form-control"  />
                    <h:message for="input_observacion" styleClass="msj-danger"/>
                </p:outputPanel>                    
            </p:outputPanel> 

            <p:outputPanel styleClass="form-group row" id="fila_combo_cargo">
                <h:outputLabel value="#{msg.cargo}" for="combo_cargo" styleClass="col-sm-3 col-form-label obligatorio"/>
                <p:outputPanel styleClass="col-sm-9">
                    <h:selectOneMenu id="combo_cargo" value="#{selloFirmaTitularBean.comboCargoTitular.selected}" disabled="#{selloFirmaTitularBean.soloLectura}"  styleClass="form-control dropdown texto-medio"  >
                        <f:selectItems value="#{selloFirmaTitularBean.comboCargoTitular.items}" />           
                    </h:selectOneMenu>  
                </p:outputPanel>                    
            </p:outputPanel>

            <p:outputPanel styleClass="form-group row" id="fila_firma">
                <h:outputLabel value="#{msg.firmaSello}" for="file_upload_firma" styleClass="col-sm-3 col-form-label"/>
                <p:outputPanel styleClass="col-sm-8">
                    <p:fileUpload fileUploadListener="#{selloFirmaTitularBean.handleFileUploadFirma}"
                                  id="file_upload_firma"
                                  mode="advanced" 
                                  dragDropSupport="true"
                                  label="Cargar firma"
                                  uploadLabel="#{msg.confirmar}"
                                  invalidSizeMessage="#{msg.tamanioNoPermitido} "
                                  invalidFileMessage="#{msg.formatoNoPermitidoFotos} "
                                  update="fila_firma"
                                  cancelLabel="#{msg.cancelar}"
                                  auto="true"
                                  rendered="#{!selloFirmaTitularBean.soloLectura}"
                                  sizeLimit="#{applicationBean.fotosTamPermitido}" allowTypes="/(\.|\/)(jpe?g|png)$/" />     
                    <o:graphicImage value="#{imagenesBean.getFile(selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello.achPk)}" width="220" 
                                    lastModified="#{selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello.achUltmodFechaAsDate}"
                                    alt="#{selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello.achNombre}" title="#{selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello.achNombre}"
                                    rendered="#{selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello != null and selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello.achPk != null and !selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello.achShowTmpFile}"/>

                    <o:graphicImage value="#{imagenesBean.getTmpFile(selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello.achTmpPath)}" width="220" 
                                    alt="#{selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello.achNombre}" title="#{selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello.achNombre}"
                                    rendered="#{selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello != null and selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello.achShowTmpFile}" />
                    <o:graphicImage name="/imagenes/firma.png" width="220" 
                                    rendered="#{selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello == null or (selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello.achPk == null and !selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello.achShowTmpFile)}"/>
                    <p:commandLink action="#{selloFirmaTitularBean.eliminarFotoFirma()}" update="fila_firma" value="#{msg.eliminar}" rendered="#{!selloFirmaTitularBean.soloLectura and selloFirmaTitularBean.entidadEnEdicion.sftFirmaSello != null}" style="margin-top:5px; display: block;" />
                </p:outputPanel>                    
            </p:outputPanel>


        </p:outputPanel>

        <div class="form-action-buttons">
            <p:commandButton  id="btnGuardar" value="#{msg.guardar}" action="#{selloFirmaTitularBean.guardar()}" update="@form"  styleClass="btn btn-primary" icon="glyphicon glyphicon-floppy-disk" rendered="#{!selloFirmaTitularBean.soloLectura}"/>
             <p:blockUI block="@form" trigger="btnGuardar" />
            <p:defaultCommand target="btnGuardar" scope="containerSelloFirma"/>     
        </div>

        <h:panelGroup styleClass="volverLink" layout="block">
            <p:commandLink value="#{msg.volver}" onclick="history.go(-1)" styleClass="btn btn-link"/> 
        </h:panelGroup>





    </h:form>
</ui:composition>
