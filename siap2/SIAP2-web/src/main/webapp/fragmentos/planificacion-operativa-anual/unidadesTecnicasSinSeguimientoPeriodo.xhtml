<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui">
        <h:panelGroup layout="block" id="unidadesTecnicasSeguimiento">
            <h:form prependId="false">
                <h:panelGroup layout="block" id="divMensajesUnidadesTecnicasSeguimiento">
                    <h:messages id="mensajesUT" showSummary="true" errorClass="alert alert-danger" infoClass="alert alert-success" styleClass="mensajes"/>
                </h:panelGroup>
                <!--
                <div class="panelFiltro">
                        <fieldset>
                            <legend><h:outputText value="#{textMB.obtenerTexto('labels.filtrar')}" /></legend>
                            <div class="buscador-filtros row">
                                
                                <div class="col-sm-6 form-horizontal">
                                    <div class="form-group">
                                        <h:outputLabel styleClass="col-sm-4 control-label" value="#{textMB.obtenerTexto('labels.anio')}:" />
                                        <div class="col-sm-8">
                                            <h:selectOneMenu  id="anioIdFiltroUT" value="#{seguimientoIndicadoresPOA.filtroAnioIdUT}"  styleClass="form-control textoMedio" required="false" >
                                                <f:selectItems value="#{utilsMB.getAniosFiscalesPlanificacion()}"  />
                                            </h:selectOneMenu>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 form-horizontal">
                                    <div class="form-group">
                                        <h:outputLabel styleClass="col-sm-4 control-label" value="#{textMB.obtenerTexto('labels.EditarPOA')}:" />
                                        <div class="col-sm-8">
                                            <p:autoComplete id="filtro_programa_autocomplete_ut" 
                                                    styleClass="form-control textoLargo" 
                                                    value="#{seguimientoIndicadoresPOA.filtroPOASelectedUT}"  
                                                    completeMethod="#{seguimientoIndicadoresPOA.completePOA}" 
                                                    maxResults="10"
                                                    var="poa" itemLabel="#{poa.nombre}"  
                                                    itemValue="#{poa}" 
                                                    onclick="PF('filtro_programa_autocomplete_ut').search(PF('filtro_programa_autocomplete_ut').input.val())" 
                                                    widgetVar="filtro_programa_autocomplete_ut" 
                                                    forceSelection="true" 
                                                    queryDelay="500" 
                                                    converter="#{POAConverter}"
                                                    multiple="false">
                                            </p:autoComplete>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-sm-6 form-horizontal">
                                    <div class="form-group">
                                        <h:outputLabel styleClass="col-sm-4 control-label" value="#{textMB.obtenerTexto('labels.unidad_tecnica_especifica')}:" />
                                        <div class="col-sm-8">
                                            <p:autoComplete id="filtro_unidad_tecnica_autocomplete_ut" 
                                                    styleClass="form-control textoLargo" 
                                                    value="#{seguimientoIndicadoresPOA.filtroUnidadTecnicaSelectedUT}"  
                                                    completeMethod="#{seguimientoIndicadoresPOA.completeUnidadesTecnicas}" 
                                                    maxResults="10"
                                                    var="ut" itemLabel="#{ut.nombre}"  
                                                    itemValue="#{ut}" 
                                                    onclick="PF('filtro_unidad_tecnica_autocomplete_ut').search(PF('filtro_unidad_tecnica_autocomplete_ut').input.val())" 
                                                    widgetVar="filtro_unidad_tecnica_autocomplete_ut" 
                                                    forceSelection="true" 
                                                    queryDelay="500" 
                                                    converter="#{unidadTecnicaConverter}"
                                                    multiple="false">
                                            </p:autoComplete>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-sm-6 form-horizontal">
                                    <div class="form-group">
                                        <div class="col-sm-offset-4 col-sm-8">
                                            <p:commandButton styleClass="btn btn-primary" icon="glyphicon glyphicon-search" update="@form" process="@this" value="#{textMB.obtenerTexto('labels.Consultar')}"  actionListener="#{seguimientoIndicadoresPOA.filterTableUT()}"/>
                                            <p:commandButton styleClass="btn btn-link" update="@form" process="@this" value="#{textMB.obtenerTexto('labels.Limpiar')}" actionListener="#{seguimientoIndicadoresPOA.limpiarUT()}"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>-->
                    <div>
                        <fieldset class="fieldsetSmall fieldset">
                            <legend><h:outputText value="#{textMB.obtenerTexto('labels.filtrar')}" /></legend>
                            <div class="buscador-filtros">
                                <div class="col-sm-6 form-horizontal">
                                                <div class="form-group">
                                                    <h:outputLabel styleClass="col-sm-4 control-label" value="#{textMB.obtenerTexto('labels.anio')}:" />
                                                    <div class="col-sm-8">
                                                        <h:selectOneMenu  id="anioIdFiltro" value="#{seguimientoIndicadoresPOA.filtroAnioIdUT}"  styleClass="form-control textoMedio" required="false" >
                                                            <f:selectItems value="#{utilsMB.getAniosFiscalesPlanificacion()}"  />
                                                        </h:selectOneMenu>
                                                    </div>
                                                </div>
                                            </div>
                                <div class="form-inline">
                                    <p:commandButton actionListener="#{seguimientoIndicadoresPOA.filterTableUT()}" styleClass="btn btn-default" icon="glyphicon glyphicon-search" update="tablaActividadesUT" value="#{textMB.obtenerTexto('labels.Consultar')}"  />
                                    <p:commandButton styleClass="btn btn-link" update="tablaActividadesUT" process="@this" value="#{textMB.obtenerTexto('labels.Limpiar')}" actionListener="#{seguimientoIndicadoresPOA.limpiarUT()}"/>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                     <p:outputPanel id="tableFormUT" styleClass="panelFiltro">
                            <h:outputText value="#{textMB.obtenerTexto('labels.ResultadoDeBusquedae{0}ementos', seguimientoIndicadoresPOA.listaActividadesUT.size())}" styleClass="titulo-resultados"></h:outputText>
                             <p:dataTable  
                                 id="tablaActividadesUT"
                                 emptyMessage="#{textMB.obtenerTexto('labels.TablaVacia')}"
                                 paginator="true" rows="25"
                                 paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink} {Exporters}"
                                 rowsPerPageTemplate="5,10,25,50"
                                 lazy="true"
                                 styleClass="tabla-desglose"
                                 value="#{seguimientoIndicadoresPOA.listaActividadesUT}" 
                                 var="act"
                                 sortBy="#{act.nombreUnidadTecnicaPOA}"
                                 >
                                 <f:facet name="{Exporters}" >
                                     <h:commandLink styleClass="pull-right btn btn-icono" title="#{textMB.obtenerTexto('labels.Exportar')}">
                                         <span class="glyphicon glyphicon-export"></span>
                                         <p:dataExporter type="csv" target="tableFormUT:tablaActividadesUT" fileName="actividadesUTNoCompletadasUltimoTrimestre" />
                                     </h:commandLink> 
                                 </f:facet>
                                 <p:column headerText="#{textMB.obtenerTexto('labels.unidadTecnica')}-#{textMB.obtenerTexto('labels.poa')}" >
                                     <h:outputText value="#{act.nombreUnidadTecnicaPOA}" />
                                 </p:column> 
                                 <p:column headerText="#{textMB.obtenerTexto('labels.EditarPOA')}" >
                                     <h:outputText value="#{act.nombrePOA}" />
                                 </p:column>
                                 <p:column headerText="#{textMB.obtenerTexto('labels.MetaAnual')}" >
                                     <h:outputText value="#{act.nombreMeta}" />
                                 </p:column> 
                                 <p:column headerText="#{textMB.obtenerTexto('labels.Indicador')}" >
                                     <h:outputText value="#{act.nombreIndicador}" />
                                 </p:column>
                                 <p:column headerText="#{textMB.obtenerTexto('labels.unidadTecnica')}-#{textMB.obtenerTexto('labels.Actividad')}" >
                                     <h:outputText value="#{act.nombreUnidadTecnicaActividad}" />
                                 </p:column> 
                                 <p:column headerText="#{textMB.obtenerTexto('labels.Actividad')}" >
                                     <h:outputText value="#{act.nombreActividad}" />
                                 </p:column>
                             </p:dataTable>
                         </p:outputPanel>         
            
        </h:form>
    </h:panelGroup>
</ui:composition>

