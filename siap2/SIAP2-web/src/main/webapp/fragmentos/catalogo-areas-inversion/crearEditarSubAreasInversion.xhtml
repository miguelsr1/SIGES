<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <ui:composition>
        <ui:fragment>
            <div class="panelTituloPagina">
                <h2 id="overview" class="page-header">
                    <h:outputText value="#{textMB.obtenerTexto('labels.CrearSubAreasInversion')}"/>
                </h2>
            </div>
        </ui:fragment> 



        <h:form id="subAreaInversionForm" prependId="false">
            <h:outputText styleClass="requeridos" value="#{textMB.obtenerTexto('labels.LosCamposIndicadosSonRequeridos')}" />


            <p:outputPanel id="bloqueNoModal" styleClass="form-horizontal">
                <!-- PRINCIPAL -->
                <div class="grupoCampos">
                    <h:messages  showSummary="true"  globalOnly="true"  errorClass="alert alert-danger" infoClass="alert alert-success" styleClass="mensajes"/>

                    <div class="form-group">
                        <h:outputLabel styleClass="col-sm-3 control-label" value="#{textMB.obtenerTexto('labels.Area')}:" />
                        <div class="col-sm-9">
                            <h:inputText disabled="true" value="#{areasInversionMB.areasInversion.nombre}" styleClass="form-control textoLargo" autocomplete="off" required="true"  requiredMessage="#{textMB.obtenerTexto('labels.CampoRequerido')}" >
                                <f:validateLength maximum="255" />
                            </h:inputText>
                        </div>
                    </div>

                    <div class="form-group">
                        <h:outputLabel styleClass="col-sm-3 control-label" value="*#{textMB.obtenerTexto('labels.Codigo')}:" />
                        <div class="col-sm-9">
                            <h:inputText id="codigo" value="#{areasInversionMB.subAreasInversion.codigo}" styleClass="form-control textoLargo" autocomplete="off" required="true"  requiredMessage="#{textMB.obtenerTexto('labels.CampoRequerido')}" >
                                <f:validateLength maximum="255" />
                            </h:inputText>
                            <h:message for="codigo" styleClass="help-inline msj-danger" />
                        </div>
                    </div>


                    <div class="form-group">
                        <h:outputLabel styleClass="col-sm-3 control-label" value="*#{textMB.obtenerTexto('labels.Nombre')}:" />
                        <div class="col-sm-9">
                            <h:inputText id="nombre" value="#{areasInversionMB.subAreasInversion.nombre}" styleClass="form-control textoLargo" autocomplete="off"  required="true"  requiredMessage="#{textMB.obtenerTexto('labels.CampoRequerido')}">
                                <f:validateLength maximum="255" />
                            </h:inputText>
                            <h:message for="nombre" styleClass="help-inline msj-danger" />
                        </div>
                    </div>

                    <div class="form-group">
                        <h:outputLabel styleClass="col-sm-3 control-label" value="#{textMB.obtenerTexto('labels.Descripcion')}:" />
                        <div class="col-sm-9">
                            <h:inputTextarea id="descripcion" value="#{areasInversionMB.subAreasInversion.descripcion}" styleClass="form-control textoLargo">
                                <f:validateLength maximum="255" />
                            </h:inputTextarea>
                            <h:message for="descripcion" styleClass="help-inline msj-danger" />
                        </div>
                    </div>

                    <div class="form-group">
                        <h:outputLabel styleClass="col-sm-3 control-label" value="#{textMB.obtenerTexto('labels.Orden')}:" />
                        <div class="col-sm-9">
                            <h:inputText id="orden" value="#{areasInversionMB.subAreasInversion.orden}" styleClass="form-control textoLargo" autocomplete="off" />
                            <h:message for="orden" styleClass="help-inline msj-danger" />
                        </div>
                    </div>    

                    <div class="form-group">
                        <h:outputLabel styleClass="col-sm-3 control-label" value="#{textMB.obtenerTexto('labels.Habilitado')}:" />
                        <div class="col-sm-9">
                            <div class="checkbox">
                                <label>
                                    <h:selectBooleanCheckbox value="#{areasInversionMB.subAreasInversion.habilitado}" />
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <h:outputLabel styleClass="col-sm-3 control-label" value="#{textMB.obtenerTexto('labels.AplicaPlanCompras')}:" />
                        <div class="col-sm-9">
                            <div class="checkbox">
                                <label>
                                    <h:selectOneRadio styleClass="radio" value="#{areasInversionMB.subAreasInversion.aplicaPlanCompras}" > 
                                        <f:selectItem itemValue="true" itemLabel="SÃ­"/>
                                        <f:selectItem itemValue="false" itemLabel="No"/>
                                    </h:selectOneRadio>
                                </label>
                            </div>
                        </div>
                    </div>


                    <div class="form-group">
                        <div class="col-sm-offset-3 col-sm-9">

                            <p:commandButton styleClass="btn btn-primary" 
                                             icon="glyphicon glyphicon-saved" 
                                             value="#{textMB.obtenerTexto('labels.Guardar')}" 
                                             update="subAreaInversionForm"
                                             action="#{areasInversionMB.guardarActualizarSubAreaInversion()}"/>


                            <h:outputLink styleClass="btn btn-link" value="crearEditarAreasInversion.xhtml" >
                                <f:param name="id" value="#{areasInversionMB.areasInversion.id}" />
                                <h:outputText value="#{textMB.obtenerTexto('labels.Volver')}" />
                            </h:outputLink>
                        </div>
                    </div>
                </div>
            </p:outputPanel>




            <p:outputPanel styleClass="form-horizontal" id="IdOptPnelRel">
                <div class="grupoCampos">
                    <h:messages  showSummary="true"  globalOnly="true"  errorClass="alert alert-danger" infoClass="alert alert-success" styleClass="mensajes"/>

                    <div class="form-group">
                        <div class="col-sm-6">
                            <h:outputText styleClass="subtitulo" value="#{textMB.obtenerTexto('labels.RelacionAII')}" />
                        </div>
                    </div>


                    <div class="form-group">
                        <div class="col-sm-2">
                            <h:outputText styleClass="col-sm-10 control-label" value="#{textMB.obtenerTexto('labels.CodigoInsumoTooltip')}:" />
                        </div>
                        <div class="col-sm-2">
                            <h:inputText value="#{areasInversionMB.codigoInsumo}" styleClass="col-sm-6 form-control textoMedio" autocomplete="off"/>
                        </div>
                        <div class="col-sm-2">
                            <h:outputText styleClass="col-sm-10 control-label" value="#{textMB.obtenerTexto('labels.Nombre')}:" />
                        </div>
                        <div class="col-sm-2">
                            <h:inputText value="#{areasInversionMB.nombreInsumo}" styleClass="col-sm-6 form-control textoMedio" autocomplete="off"/>
                        </div>
                        
                    </div>
                    
                    <div class="form-group">
                        <div class="col-sm-2">
                            <h:outputText styleClass="col-sm-10 control-label" value="#{textMB.obtenerTexto('labels.conocidoPor')}:" />
                        </div>
                        <div class="col-sm-2">
                            <h:inputText value="#{areasInversionMB.conocidoPor}" styleClass="col-sm-6 form-control textoMedio" autocomplete="off"/>
                        </div>
                        <div class="col-sm-offset-2 col-sm-2">
                            <p:commandButton styleClass="btn btn-primary" 
                                             icon="glyphicon glyphicon-saved" 
                                             value="#{textMB.obtenerTexto('labels.Guardar')}" 
                                             update="IdOptPnelRel"
                                             disabled="#{empty areasInversionMB.subAreasInversion.id}"
                                             action="#{areasInversionMB.buscarIsumo()}"/>

                        </div>
                    </div>


                    <p:dataTable  id="tablaRelacion"
                                  var="item" 
                                  value="#{areasInversionMB.listaRelacion}" 
                                  emptyMessage="#{textMB.obtenerTexto('labels.TablaVacia')}" 
                                  rowIndexVar="rowIndex">


                        <p:column headerText="#{textMB.obtenerTexto('labels.Insumo')}">
                            <h:outputText value="#{item.insumo.codigo}" />
                        </p:column>

                        <p:column headerText="#{textMB.obtenerTexto('labels.Nombre')}">
                            <h:outputText value="#{item.insumo.nombre}" />
                        </p:column>
                        <p:column headerText="#{textMB.obtenerTexto('labels.conocidoPor')}">
                            <h:outputText value="#{item.insumo.conocidoPor}" />
                        </p:column>

                        <p:column headerText="#{textMB.obtenerTexto('labels.Eliminar')}" styleClass="columnaAcciones">
                            <p:commandButton icon="glyphicon glyphicon-remove" 
                                             styleClass="btn btn-danger btn-icono" 
                                             title="#{textMB.obtenerTexto('labels.Eliminar')}"  
                                             onclick="if (!existeConfirmacion(this.id))
                                                         return false" 
                                             actionListener="#{areasInversionMB.eliminarRelacion(item.id)}"
                                             update="IdOptPnelRel confirmModalCallBackBody"
                                             immediate="true">
                            </p:commandButton>                       
                        </p:column>  
                    </p:dataTable>
                </div>
            </p:outputPanel>
        </h:form> 

        <!-- ELIMINAR -->
        <ui:include src="../eliminarGeneralModal.xhtml" />

    </ui:composition>
</html>

