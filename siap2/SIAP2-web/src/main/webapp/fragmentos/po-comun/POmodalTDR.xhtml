<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui">

    <h:panelGroup id="anadirTDR"  layout="block">
        <!-- MODAL TDR -->
        <div class="modal fade"  id="anadirTDRModal" tabindex="-1" role="dialog" aria-labelledby="anadirTDRModal">
            <div class="modal-dialog modal-lg" role="document">
                <h:panelGroup styleClass="modal-content" layout="block" id="anadirTDRcontenidoModal">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="glyphicon glyphicon-remove-sign"></span></button>
                        <span class="modal-title">
                            <h:outputText value="#{textMB.obtenerTexto('labels.AniadirTDR')}" /> 
                        </span>
                    </div>
                    <div class="tab-content">
                        <!-- EMPIEZA MODAL TDR -->
                        <div class="tab-pane active" id="tdr">
                            <h:form id="anadirTDRForm"  prependId="false" enctype="multipart/form-data"> 
                                <div class="modal-body">
                                    <div class="form-horizontal">
                                        <h:messages  showSummary="true"  globalOnly="true"  errorClass="alert alert-danger" infoClass="alert alert-success" styleClass="mensajes"/>		
                                        <div class="form-group">
                                            <h:outputLabel for="anadirTDRfileUpload" styleClass="col-sm-3 control-label" value="#{textMB.obtenerTexto('labels.Archivo')}:" />
                                            <div class="col-sm-9">
                                                <p:fileUpload id="anadirTDRfileUpload" 
                                                              label="#{textMB.obtenerTexto('labels.Selecionar')}" 
                                                              value="#{parameterBean.tempFile}"
                                                              mode="advanced"
                                                              multiple="false"
                                                              fileUploadListener="#{parameterBean.fileUploadListener}"
                                                              auto="true"
                                                              update="archivoAsubir" />  
                                                <h:panelGroup layout="block" id="archivoAsubir" >
                                                    <ui:fragment rendered="#{parameterBean.tempTDR.tempUploadedFile != null}">
                                                        <h:outputText value="#{textMB.obtenerTexto('labels.ArchivoAGuardar')}:" />
                                                        <h:outputText value="#{parameterBean.tempTDR.tempUploadedFile.fileName}" />                                         
                                                    </ui:fragment>
                                                </h:panelGroup>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <h:outputLabel for="anadirTDRContenido" styleClass="col-sm-3 control-label" value="#{textMB.obtenerTexto('labels.Contenido')}:" />
                                            <div class="col-sm-9">
                                                <h:inputTextarea id="anadirTDRContenido" value="#{parameterBean.tempTDR.contenido}"  styleClass="form-control textoLargo"   rows="10" />
                                                <h:message for="anadirTDRContenido" styleClass="help-inline msj-danger" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <p:commandButton  styleClass="btn btn-primary" icon="glyphicon glyphicon-ok" value="#{textMB.obtenerTexto('labels.Aceptar')}" actionListener="#{parameterBean.guardarTDR()}" update="tablaLineas @form" ajax="true"/>
                                    <button type="button" class="btn btn-link" data-dismiss="modal"><h:outputText value="#{textMB.obtenerTexto('labels.Cancelar')}" /></button>
                                </div>
                            </h:form>
                        </div>
                    </div>
                </h:panelGroup>
            </div>
        </div> 
    </h:panelGroup>
</ui:composition>
